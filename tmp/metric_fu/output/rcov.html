<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <meta content='en' http-equiv='Content-Language' />
    <title>metrics</title>
    <style>
    /*
Copyright (c) 2008, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
version: 2.5.2
*/
html{color:#000;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:normal;}li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym {border:0;font-variant:normal;}sup {vertical-align:text-top;}sub {vertical-align:text-bottom;}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit;}input,textarea,select{*font-size:100%;}legend{color:#000;}

    /* --------------------------------------------------------------

   buttons.css
   * Gives you some great CSS-only buttons.

   Created by Kevin Hale [particletree.com]
   * particletree.com/features/rediscovering-the-button-element

   See Readme.txt in this folder for instructions.

-------------------------------------------------------------- */

button {
  display:block;
  float:left;
  margin:0 0.583em 0.667em 0;
  padding:5px 10px 5px 7px;   /* Links */

  border:1px solid #dedede;
  border-top:1px solid #eee;
  border-left:1px solid #eee;

  background-color:#f5f5f5;
  font-family:"Lucida Grande", Tahoma, Arial, Verdana, sans-serif;
  font-size:100%;
  line-height:130%;
  text-decoration:none;
  font-weight:bold;
  color:#565656;
  cursor:pointer;
}
button {
  width:auto;
  overflow:visible;
  padding:4px 10px 3px 7px;   /* IE6 */
}
button[type] {
  padding:4px 10px 4px 7px;   /* Firefox */
  line-height:17px;           /* Safari */
}
*:first-child+html button[type] {
  padding:4px 10px 3px 7px;   /* IE7 */
}
button img {
  margin:0 3px -3px 0 !important;
  padding:0;
  border:none;
  width:16px;
  height:16px;
  float:none;
}


/* Button colors
-------------------------------------------------------------- */

/* Standard */
button:hover {
  background-color:#dff4ff;
  border:1px solid #c2e1ef;
  color:#336699;
}

/* Positive */
body .positive {
  color:#529214;
}
button.positive:hover {
  background-color:#E6EFC2;
  border:1px solid #C6D880;
  color:#529214;
}

/* Negative */
body .negative {
  color:#d12f19;
}
button.negative:hover {
  background:#fbe3e4;
  border:1px solid #fbc2c4;
  color:#d12f19;
}

    html {
  background-color: #e0e0e0; }

body {
  font-size: 100%;
  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
  color: #333333; }

a {
  color: #ed1556;
  text-decoration: none; }
  a:hover {
    color: #ffffff;
    background-color: #ed1556; }

#header, #content, #footer {
  margin: 0 auto;
  background: #eeeeee;
  padding: 0 2em;
  z-index: 0;
  position: relative;
  font-size: 1em; }

#header {
  background: #ffffff; }
  #header h1 {
    font-weight: bold;
    font-size: 1.5em; }
  #header address.watermark {
    position: absolute;
    font-weight: bold;
    right: 3em;
    top: 0;
    font-size: .75em;
    color: #cccccc; }
    #header address.watermark a {
      color: #cccccc;
      font-weight: bold;
      font-size: 2em; }
      #header address.watermark a:hover {
        background: transparent;
        color: #aaaaaa; }

#content {
  padding-top: 1em;
  padding-bottom: 2em; }
  #content strong {
    font-weight: bold; }
  #content em {
    font-style: italic; }
  #content h1, #content h2, #content h3, #content h4, #content h5, #content h6 {
    color: #4e4e4e; }
  #content h1 {
    font-size: 2em;
    font-weight: bold;
    margin-bottom: .75em;
    padding: .25em 0;
    line-height: 1.2;
    border-bottom: 1px solid #c0c0c0; }
  #content h2 {
    font-weight: bold;
    font-size: 1.5em;
    margin: 1em 0 .2em; }
  #content h3 {
    font-weight: bold;
    font-size: 1.25em;
    margin: .25em 0; }
  #content h4, #content h5, #content h6 {
    font-weight: bold;
    margin-top: .5em; }
  #content code, #content pre, #content textarea, #content input {
    font-family: Monaco, Deja Vu Sans Mono, Inconsolata, Consolas, monospace; }
  #content form p {
    margin-top: 1em;
    position: relative; }
    #content form p.checkbox label {
      margin-top: 0 !important; }
  #content form input.text, #content form textarea {
    width: 30em;
    padding: .2em .4em;
    color: #4e4e4e; }
  #content form input.text {
    height: 1.4em; }
  #content form label {
    float: left;
    display: block;
    margin-top: .5em;
    width: 8em;
    margin-right: .75em; }
  #content form .with_errors label {
    background: red;
    color: white;
    position: relative;
    top: -.7em; }
  #content form .with_errors.required label {
    position: static;
    margin-right: .25em;
    padding: 0 .2em; }
  #content form .with_errors input, #content form .with_errors textarea {
    border: 2px solid #f22;
    background: #fee;
    color: #222222; }
  #content form .required label {
    float: none;
    display: block;
    width: auto;
    position: relative;
    font-weight: bold;
    margin-top: 1em;
    text-indent: -.65em; }
    #content form .required label:before {
      content: "* ";
      color: #ed1556; }
  #content form .required input.text {
    width: 25.6em;
    font-size: 24px;
    font-weight: bold; }
  #content form .normal {
    margin-top: 2em; }
  #content form h2.notifier label {
    float: none;
    width: auto;
    margin-right: 0; }
    #content form h2.notifier label .warning {
      font-size: .5em;
      font-weight: normal;
      color: #999999; }
  #content form fieldset {
    padding-bottom: 1em;
    margin-left: 1.35em;
    border-bottom: 1px solid #c0c0c0;
    margin-bottom: 1em; }
    #content form fieldset h3 {
      margin-top: 1em;
      margin-bottom: 0; }
    #content form fieldset p.normal {
      margin-top: 1em; }
    #content form fieldset p label {
      width: 6.7em; }
  #content form p.submit {
    margin-top: 2em; }
    #content form p.submit:after {
      display: block;
      clear: both;
      float: none;
      content: ".";
      text-indent: -9999em;
      text-align: left; }
    #content form p.submit.destroy button,     #content form p.submit.manual-build button {
      float: none;
      display: inline; }
    #content form p.submit.manual-build button {
      margin-right: 0; }
  #content #build form, #content #last_build form {
    font-size: .75em; }
    #content #build form p.submit,     #content #last_build form p.submit {
      margin: 0;
      padding: 0;
      position: absolute;
      right: .5em;
      top: 1.25em; }
  #content .blank_slate p,   #content .error p {
    position: relative;
    top: .3em; }
  #content .blank_slate h1,   #content .error h1 {
    border-width: 0;
    margin: 0;
    padding: 0; }
    #content .blank_slate h1 button,     #content .error h1 button {
      float: none;
      border: 0 none;
      background: transparent;
      display: inline;
      color: #ed1556;
      padding: 0.25em 0;
      margin: 0; }
      #content .blank_slate h1 button:hover,       #content .error h1 button:hover {
        background: #ed1556;
        color: #ffffff; }
  #content .error dt {
    margin-top: 1.4em;
    margin-bottom: .3em;
    font-size: 1.75em;
    font-family: Georgia, Times New Roman, serif; }
  #content .error dd {
    line-height: 1.4; }
  #content .error .backtrace {
    margin: 1em 0;
    overflow: scroll;
    height: 30em;
    border: 1px solid #c0c0c0;
    line-height: 1.6; }
  #content #projects {
    margin: 1em 0 2em;
    border-top: 1px solid #c0c0c0; }
    #content #projects li {
      position: relative;
      border-bottom: 1px solid #c0c0c0; }
      #content #projects li.odd {
        background: #e6e6e6; }
      #content #projects li.building {
        background: transparent url(/spinner.gif) no-repeat scroll right; }
      #content #projects li a {
        font-size: 2em;
        padding: .25em;
        line-height: 1.2;
        font-weight: bold;
        display: block; }
        #content #projects li a.success {
          color: #337022; }
        #content #projects li a.failed {
          color: #ff1100; }
      #content #projects li .meta {
        position: absolute;
        right: .6em;
        top: 1.5em;
        font-size: 0.8em;
        color: #999999;
        text-align: right; }
      #content #projects li.building .meta {
        right: 1.6em; }
      #content #projects li.success .meta {
        color: #337022; }
      #content #projects li.failed .meta {
        color: #ff1100; }
  #content #previous_builds li a {
    display: block;
    padding: .25em;
    margin-bottom: .25em;
    border-width: 1px;
    border-style: solid; }
    #content #previous_builds li a strong {
      font-size: 1.3em; }
    #content #previous_builds li a .attribution {
      font-size: .9em; }
  #content #projects li.success a,   #content #previous_builds li.success a {
    background-color: #bbf8aa;
    border-color: #99d688;
    color: #337022; }
    #content #projects li.success a .attribution,     #content #previous_builds li.success a .attribution {
      color: #77b466; }
    #content #projects li.success a:hover,     #content #previous_builds li.success a:hover {
      background-color: #ddffcc; }
  #content #projects li.failed a,   #content #previous_builds li.failed a {
    background-color: #ffbbaa;
    border-color: #dd9988;
    color: #ff1100; }
    #content #projects li.failed a .attribution,     #content #previous_builds li.failed a .attribution {
      color: #bb7766; }
    #content #projects li.failed a:hover,     #content #previous_builds li.failed a:hover {
      background-color: #ffddcc; }
  #content #build, #content #last_build {
    position: relative; }
    #content #build h1, #content #build blockquote,     #content #last_build h1, #content #last_build blockquote {
      border-width: 0 1px;
      border-style: solid; }
    #content #build h1,     #content #last_build h1 {
      border-top-width: 1px; }
    #content #build blockquote,     #content #last_build blockquote {
      bottom-bottom-width: 1px;
      line-height: 1.4; }
    #content #build.success h1, #content #build.success blockquote,     #content #last_build.success h1, #content #last_build.success blockquote {
      background-color: #bbf8aa;
      border-color: #99d688 #ccffbb #ccffbb #99d688; }
    #content #build.success h1,     #content #last_build.success h1 {
      color: #337022; }
    #content #build.success .meta,     #content #last_build.success .meta {
      color: #77b466; }
    #content #build.failed h1, #content #build.failed blockquote,     #content #last_build.failed h1, #content #last_build.failed blockquote {
      background-color: #ffbbaa;
      border-color: #dd9988 #ffccbb #ffccbb #dd9988; }
    #content #build.failed h1,     #content #last_build.failed h1 {
      color: #ff1100; }
    #content #build.failed .meta,     #content #last_build.failed .meta {
      color: #bb7766; }
    #content #build h1,     #content #last_build h1 {
      margin-top: .5em;
      margin-bottom: 0;
      padding: .25em;
      color: #337022; }
    #content #build blockquote,     #content #last_build blockquote {
      padding: .75em;
      margin-bottom: 2em; }
      #content #build blockquote .meta,       #content #last_build blockquote .meta {
        margin-top: 1em;
        display: block;
        font-size: .9em; }
    #content #build pre.output,     #content #last_build pre.output {
      background: #111;
      color: #fff;
      padding: .5em;
      overflow: auto;
      max-height: 50em;
      font-size: .825em; }
      #content #build pre.output .color30,       #content #last_build pre.output .color30 {
        color: #333; }
      #content #build pre.output .color31,       #content #last_build pre.output .color31 {
        color: #e33; }
      #content #build pre.output .color32,       #content #last_build pre.output .color32 {
        color: #3e3; }
      #content #build pre.output .color33,       #content #last_build pre.output .color33 {
        color: #ee3; }
      #content #build pre.output .color34,       #content #last_build pre.output .color34 {
        color: #33e; }
      #content #build pre.output .color35,       #content #last_build pre.output .color35 {
        color: #e3e; }
      #content #build pre.output .color36,       #content #last_build pre.output .color36 {
        color: #3ee; }
      #content #build pre.output .color37,       #content #last_build pre.output .color37 {
        color: #fff; }
  #content #push_path {
    display: block;
    margin-top: 1em;
    margin-left: 2em; }
  #content div#graph {
    width: 100%;
    height: 600px; }

a.success {
  color: #bbf8aa; }
  a.success:hover {
    background-color: #bbf8aa;
    color: white; }
a.failed {
  color: #ffbbaa; }
  a.failed:hover {
    background-color: #ffbbaa;
    color: white; }

#footer {
  padding: 1.5em 2.5em;
  border-top: 1px solid #ccc;
  font-size: .8em;
  color: #666;
  text-align: right; }
  #footer strong {
    font-weight: bold; }

    table {
  margin-top: 20px;
  border-collapse: collapse;
  border: 1px solid #666;
  background: #fff;
  margin-bottom: 20px;
}

table tr.light {
   background: #fff;
}

table tr.dark {
  background: #f9f9f9;
}

table tr:hover {
  background: #FFFFC0;
}

table td, table th {
  padding: 4px;
  font-size: 11px;
}
table th {
  text-align: center;
  color: #337022;
  background: #DDFFCC;
  font-weight: bold;
  border: #99D688 1px solid;
}

table td {
  border: #d0d0d0 1px solid;
}

table td.score {
  text-align: right;
}

.warning {
  background: yellow;
}

    .bluff-tooltip {
  background: #fff;
  border: 1px solid #d1edf5;
  padding: 8px 8px 6px;
}
.bluff-tooltip .color {
  display: block;
  height: 4px;
  width: 30px;
  margin: 0 0 4px;
  overflow: hidden;
}
.bluff-tooltip .data {
  font-weight: bold;
}
    </style>
    <link REL="SHORTCUT ICON" HREF="/favicon.ico">
    <script language="javascript" src="utils.js" type="text/javascript"></script>
    <script language="javascript" src="js-class.js" type="text/javascript"></script>
    <script language="javascript" src="bluff-min.js" type="text/javascript"></script>
    <script language="javascript" src="excanvas.js" type="text/javascript"></script>
    <script language="javascript" src="standalone-framework.js" type="text/javascript"></script>
    <script language="javascript" src="highcharts.js" type="text/javascript"></script>
  </head>
  <body>
    <div id='header'>
      <h1><a href="/">metrics</a> | <a href="index.html">hellobar_new</a></h1>
      <address class='watermark'>
        built with
        <a href='https://github.com/metricfu/metric_fu'>MetricFu</a>
      </address>
    </div>
    <div id='content'>
      <style data-file="rcov">
.rcov_code td {
  border-bottom: 1px solid #ddd ;
  padding: 0;
  margin: 0;
}
.rcov_code tr {
  border: 0px;
  padding:0px;
  margin: 0px;
}
.rcov_code pre {
  border: 0px;
  padding: 0px;
  margin: 0px;
}
.rcov_run {}
.rcov_not_run {
  background-color: #d88;
}
.rcov_run a, .rcov_not_run a {
  text-decoration: none;
}
.rcov_run a {
  color: #333;
}
.rcov_not_run a {
  color: #000;
}
.rcov_overflow {
  overflow: auto;
  font-size: 50%;
}

</style>
<h3>Rcov Code Coverage Results</h3>

<p>C0 code coverage information.</p>

<div id="graph_container"></div>
<script language="javascript" src="rcov.js?1403294772" type="text/javascript"></script>

<p>Total Coverage: 93.4% </p>
<table>
  <tr>
    <th>File Path</th>
    <th>Percent run</th>
  </tr>
  
  
    <tr>
      <td><a href="#_app_controllers_site_elements_controller_rb">./app/controllers/site_elements_controller.rb</a></td>
      <td>34</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_models_internal_prop_rb">./app/models/internal_prop.rb</a></td>
      <td>38</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_models_mailer_gateway_rb">./app/models/mailer_gateway.rb</a></td>
      <td>60</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_models_bar_rb">./app/models/bar.rb</a></td>
      <td>63</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_controllers_sites_controller_rb">./app/controllers/sites_controller.rb</a></td>
      <td>68</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_controllers_admin_users_controller_rb">./app/controllers/admin/users_controller.rb</a></td>
      <td>73</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_models_internal_report_rb">./app/models/internal_report.rb</a></td>
      <td>77</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_controllers_admin_controller_rb">./app/controllers/admin_controller.rb</a></td>
      <td>80</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_controllers_admin_access_controller_rb">./app/controllers/admin/access_controller.rb</a></td>
      <td>83</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_controllers_user_controller_rb">./app/controllers/user_controller.rb</a></td>
      <td>89</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_models_validators_url_validator_rb">./app/models/validators/url_validator.rb</a></td>
      <td>89</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_controllers_application_controller_rb">./app/controllers/application_controller.rb</a></td>
      <td>95</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_controllers_contact_submissions_controller_rb">./app/controllers/contact_submissions_controller.rb</a></td>
      <td>95</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_models_site_rb">./app/models/site.rb</a></td>
      <td>98</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_controllers_site_elements_controller_spec_rb">./spec/controllers/site_elements_controller_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_models_condition_date_condition_rb">./app/models/condition/date_condition.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_models_condition_url_condition_rb">./app/models/condition/url_condition.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_models_internal_event_rb">./app/models/internal_event.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_models_admin_login_attempt_rb">./app/models/admin_login_attempt.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_controllers_wordpress_plugin_controller_rb">./app/controllers/wordpress_plugin_controller.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_controllers_welcome_controller_rb">./app/controllers/welcome_controller.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_models_rule_rb">./app/models/rule.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_controllers_users_sessions_controller_rb">./app/controllers/users/sessions_controller.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_models_site_membership_rb">./app/models/site_membership.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_controllers_users_passwords_controller_rb">./app/controllers/users/passwords_controller.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_controllers_admin_users_controller_spec_rb">./spec/controllers/admin/users_controller_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_controllers_admin_controller_spec_rb">./spec/controllers/admin_controller_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_controllers_application_controller_spec_rb">./spec/controllers/application_controller_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_controllers_contact_submissions_controller_spec_rb">./spec/controllers/contact_submissions_controller_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_app_models_condition_rb">./app/models/condition.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_controllers_sites_controller_spec_rb">./spec/controllers/sites_controller_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_controllers_user_controller_spec_rb">./spec/controllers/user_controller_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_controllers_users_passwords_controller_spec_rb">./spec/controllers/users/passwords_controller_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_controllers_users_sessions_controller_spec_rb">./spec/controllers/users/sessions_controller_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_controllers_welcome_controller_spec_rb">./spec/controllers/welcome_controller_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_controllers_wordpress_plugin_controller_spec_rb">./spec/controllers/wordpress_plugin_controller_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_helpers_admin_users_helper_spec_rb">./spec/helpers/admin/users_helper_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_helpers_contact_submissions_helper_spec_rb">./spec/helpers/contact_submissions_helper_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_helpers_email_digest_helper_spec_rb">./spec/helpers/email_digest_helper_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_helpers_site_elements_helper_spec_rb">./spec/helpers/site_elements_helper_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_helpers_sites_helper_spec_rb">./spec/helpers/sites_helper_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_helpers_user_helper_spec_rb">./spec/helpers/user_helper_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_helpers_users_passwords_helper_spec_rb">./spec/helpers/users/passwords_helper_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_helpers_users_sessions_helper_spec_rb">./spec/helpers/users/sessions_helper_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_helpers_wordpress_plugin_helper_spec_rb">./spec/helpers/wordpress_plugin_helper_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_lib_hello_email_digest_spec_rb">./spec/lib/hello/email_digest_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_lib_hello_tracking_param_spec_rb">./spec/lib/hello/tracking_param_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_lib_legacy_migrator_date_time_converter_spec_rb">./spec/lib/legacy_migrator/date_time_converter_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_lib_legacy_migrator_spec_rb">./spec/lib/legacy_migrator_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_lib_script_generator_spec_rb">./spec/lib/script_generator_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_models_admin_spec_rb">./spec/models/admin_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_models_bar_spec_rb">./spec/models/bar_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_models_condition_date_condition_spec_rb">./spec/models/condition/date_condition_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_models_condition_url_condition_spec_rb">./spec/models/condition/url_condition_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_models_internal_report_spec_rb">./spec/models/internal_report_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_models_site_membership_spec_rb">./spec/models/site_membership_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_models_site_spec_rb">./spec/models/site_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_models_user_spec_rb">./spec/models/user_spec.rb</a></td>
      <td>100</td>
    </tr>
    
  
    <tr>
      <td><a href="#_spec_models_validators_url_validator_shared_rb">./spec/models/validators/url_validator_shared.rb</a></td>
      <td>100</td>
    </tr>
    
  
</table>


  <h2 id="_app_controllers_site_elements_controller_rb"> ./app/controllers/site_elements_controller.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>class SiteElementsController < ApplicationController</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  before_filter :authenticate_user!</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  before_filter :load_site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  before_filter :load_site_element, :only => [:edit, :update, :destroy, :pause, :unpause]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  layout "with_sidebar"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  def new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    @site_element = Bar.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  def create</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    @site_element = Bar.new(site_element_params)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    if @site_element.valid?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>      @site_element.save!</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>      @site.generate_script</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>      flash[:success] = "Your bar was successfully created."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>      redirect_to site_site_elements_path(:site_id => @site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>      flash.now[:error] = "There was a problem creating your bar."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>      render :action => :new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  def update</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    if @site_element.update_attributes(site_element_params)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>      @site.generate_script</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>      flash[:success] = "Your bar was successfully updated."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>      redirect_to site_site_elements_path(:site_id => @site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>      flash.now[:error] = "There was a problem updating your bar."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>      render :action => :edit</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  def destroy</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    @site_element.destroy</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    @site.generate_script</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    flash[:success] = "Your bar was successfully deleted."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    redirect_to site_site_elements_path(:site_id => @site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  def pause</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    @site_element.update_attribute(:paused, true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    @site.generate_script</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    redirect_to site_site_elements_path(:site_id => @site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  def unpause</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    @site_element.update_attribute(:paused, false)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    @site.generate_script</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    redirect_to site_site_elements_path(:site_id => @site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  private</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  def load_site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    @site = current_user.sites.find(params[:site_id])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  def load_site_element</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    @site_element = Bar.find(params[:id])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    raise ActiveRecord::RecordNotFound unless @site_element.rule.try(:site) == @site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  def site_element_params</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>    params.require(:site_element).permit(:rule_id, :bar_type)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/site_elements_controller.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_models_internal_prop_rb"> ./app/models/internal_prop.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_prop.rb'><pre>class InternalProp < ActiveRecord::Base</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_prop.rb'><pre>end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_prop.rb'><pre>module HasInternalProps</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_prop.rb'><pre>  def internal_props</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_prop.rb'><pre>    unless @internal_props</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_prop.rb'><pre>      @internal_props = {}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_prop.rb'><pre>      InternalProp.where(:target_type=>self.class.name.underscore, :target_id=>self.id).order(:timestamp).each do |prop|</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_prop.rb'><pre>        @internal_props[prop.name] = prop.value</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_prop.rb'><pre>      end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_prop.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_prop.rb'><pre>    @internal_props</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_prop.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_prop.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_models_mailer_gateway_rb"> ./app/models/mailer_gateway.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/mailer_gateway.rb'><pre>class MailerGateway</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/mailer_gateway.rb'><pre>  def self.gateway</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/mailer_gateway.rb'><pre>    GrandCentralApi.new("http://central.crazyegg.com", Hellobar::Settings[:grand_central_api_key], Hellobar::Settings[:grand_central_api_secret])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/mailer_gateway.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/mailer_gateway.rb'><pre>  def self.send_email(type, recipient = "support@hellobar.com", params = {})</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/mailer_gateway.rb'><pre>    gateway.send_mail(type, {recipient => params})</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/mailer_gateway.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/mailer_gateway.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_models_bar_rb"> ./app/models/bar.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>class Bar < ActiveRecord::Base</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>  BAR_TYPES = %w{</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    traffic</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    email</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    social/tweet_on_twitter</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    social/follow_on_twitter</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    social/like_on_facebook</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    social/share_on_linkedin</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    social/plus_one_on_google_plus</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    social/pin_on_pinterest</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    social/follow_on_pinterest</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    social/share_on_buffer</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>  }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>  belongs_to :rule</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>  validates :bar_type, presence: true, inclusion: { in: BAR_TYPES }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>  scope :paused, -> { where(paused: true) }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>  scope :active, -> { where(paused: false) }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>  delegate :site, to: :rule, allow_nil: true</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>  serialize :settings, Hash</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>  def total_views</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    return 0 unless site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    this_data = site.get_all_time_data.detect{|b| b.bar_id.to_i == self.id.to_i}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    this_data.try(:views) || 0</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>  def total_conversions</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    return 0 unless site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    this_data = site.get_all_time_data.detect{|b| b.bar_id.to_i == self.id.to_i}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>    this_data.try(:conversions) || 0</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/bar.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_controllers_sites_controller_rb"> ./app/controllers/sites_controller.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>class SitesController < ApplicationController</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  include SitesHelper</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  before_filter :authenticate_user!</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  before_filter :load_site, :only => [:show, :edit, :update, :email_developer, :destroy]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  layout "with_sidebar"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  def create</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    @site = Site.new(site_params)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    if @site.save</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>      SiteMembership.create!(:site => @site, :user => current_user)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>      @site.create_default_rule</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>      @site.generate_script</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>      flash[:success] = "Your site was successfully created."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>      redirect_to site_path(@site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>      flash.now[:error] = "There was a problem creating your site."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>      render :action => :new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  def new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    @site = Site.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  def show</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    session[:current_site] = @site.id</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  def update</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    if @site.update_attributes(site_params)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>      flash[:success] = "Your settings have been updated."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>      redirect_to site_path(@site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>      flash.now[:error] = "There was a problem updating your settings."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>      render :action => :edit</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  def destroy</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    @site.destroy</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    flash[:success] = "Your site has been successfully deleted"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    redirect_to(current_site ? site_path(current_site) : new_site_path)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  private</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  def site_params</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    params.require(:site).permit(:url, :opted_in_to_email_digest)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  def load_site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>    @site = current_user.sites.find(params[:id])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/sites_controller.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_controllers_admin_users_controller_rb"> ./app/controllers/admin/users_controller.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>class Admin::UsersController < ApplicationController</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>  layout "admin"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>  before_filter :require_admin</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>  def index</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>    if params[:q].blank?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>      users = User.all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>      users = User.where("email like ?", "%#{params[:q]}%").all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>    @users = users.page(params[:page])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>  def impersonate</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>    @user = User.find(params[:id])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>    session[:impersonated_user] = @user.id</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>    redirect_to after_sign_in_path_for(@user)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>  def unimpersonate</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>    session.delete(:impersonated_user)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>    redirect_to admin_users_path</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/users_controller.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_models_internal_report_rb"> ./app/models/internal_report.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>class InternalReport < ActiveRecord::Base</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>  serialize :data, JSON</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>  class << self</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def clear</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      destroy_all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def set(name, data)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      report = InternalReport.where(name: name).first || InternalReport.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      report.name = name</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      report.data = data</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      report.save!</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def get(name)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      InternalReport.where(name: name).first</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def get_data(name)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      report = InternalReport.get(name)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      return nil unless report</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      begin</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        report.try :data</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      rescue NoMethodError</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def generate_all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      generate_top_referrer_metrics</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      generate_over_time_metrics</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      generate_optimizely_metrics</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      generate_installed_email_digest_metrics</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      generate_not_installed_email_digest_metrics</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def generate_top_referrer_metrics</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      set("referrer", generate_kpis_via_dimension("referrer"))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def generate_over_time_metrics</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      now = Time.now</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      set("over_time_by_day", generate_kpis_via_date_range(now-7.days, now, "%Y-%m-%d", 1.day))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      set("over_time_by_week", generate_kpis_via_date_range(now-1.year, now, "Week of %Y.%m.%d", 7.days))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def generate_optimizely_metrics</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      experiments = InternalProp.where("name like 'Optimizely: %'").select("DISTINCT(NAME)").map{|p| p["NAME"]}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      experiments.each do |experiment|</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        set(experiment, generate_kpis_via_dimension(experiment))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def generate_installed_email_digest_metrics</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      variations = (1..8).map{|w| "installed_v1_w#{w}"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      links = %w(create_bar_cta create_bar_button unsubscribe)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      generate_email_digest_metrics("installed_email_digest", variations, links)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def generate_not_installed_email_digest_metrics</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      variations = (1..4).map{|w| "not_installed_v1_w#{w}"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      links = %w(install unsubscribe)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      generate_email_digest_metrics("not_installed_email_digest", variations, links)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def generate_email_digest_metrics(name, variations, links)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      metrics = {}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      variations.map(&:to_sym).each do |variation|</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        metrics[variation] = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>          "total" => InternalProp.where(:name => variation).count,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>          "opens" => InternalEvent.where(:name => "Opened email: #{variation}").select(:target_id).uniq.count</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        links.each do |link|</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>          metrics[variation]["Clicked link: #{link}"] = InternalEvent.where(:name => "Clicked link: #{variation}_#{link}").select(:target_id).uniq.count</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      set(name, metrics)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def generate_kpis_via_dimension(dimension, options={})</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      cxn = ActiveRecord::Base.connection</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      sql = %{SELECT</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        #{internal_people_select},</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        internal_dimensions.value</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      FROM internal_people, internal_dimensions</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      WHERE</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        internal_dimensions.name = #{cxn.quote(dimension)} AND</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        internal_people.id = internal_dimensions.person_id</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      generate_kpis_from_sql(sql, options)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def generate_kpis_via_date_range(start_date, end_date, date_format, date_unit, options={})</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      sql = %{SELECT</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        #{internal_people_select},</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        DATE_FORMAT(FROM_UNIXTIME(FLOOR(IFNULL(internal_people.first_visited_at, internal_people.signed_up_at)/#{date_unit})*#{date_unit}), '#{date_format}')</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      FROM internal_people</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      WHERE</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        IFNULL(internal_people.first_visited_at, internal_people.signed_up_at) >= #{start_date.to_i} AND</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        IFNULL(internal_people.first_visited_at, internal_people.signed_up_at) <= #{end_date.to_i}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      generate_kpis_from_sql(sql, options)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def internal_people_select</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      %{internal_people.signed_up_at,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        internal_people.completed_registration_at,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        internal_people.created_first_bar_at,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        internal_people.created_second_bar_at,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        internal_people.received_data_at}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    def generate_kpis_from_sql(sql, options={})</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      results = Hash.new{|h,k| h[k] = {total: 0, signed_up: 0, completed_registration: 0, created_first_bar: 0, created_second_bar: 0, installed: 0, total_time_first_bar: 0}}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      dimension_lookups = nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      if options[:dimension_lookups]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        dimension_lookups = {}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        options[:dimension_lookups].each do |value, keys|</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>          keys.each do |key|</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>            dimension_lookups[key] = value</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>          end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      </pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      ActiveRecord::Base.connection.execute(sql).each do |row|</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        signed_up_at, completed_registration_at, created_first_bar_at, created_second_bar_at, received_data_at, value = *row</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        key = value</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        if dimension_lookups</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>          key = dimension_lookups[key] || dimension_lookups[:*] || key</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        result = results[key]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        result[:total] += 1</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        result[:signed_up] += 1 if signed_up_at</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        result[:completed_registration] += 1 if completed_registration_at</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        result[:created_first_bar] += 1 if created_first_bar_at</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        result[:created_second_bar] += 1 if created_second_bar_at</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        result[:installed] += 1 if received_data_at</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>        result[:total_time_first_bar] += (created_first_bar_at-signed_up_at) if created_first_bar_at and signed_up_at and created_first_bar_at-signed_up_at < 30*60</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>      return results</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_report.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_controllers_admin_controller_rb"> ./app/controllers/admin_controller.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin_controller.rb'><pre>class AdminController < ApplicationController</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin_controller.rb'><pre>  layout "admin"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin_controller.rb'><pre>  before_filter :require_admin</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin_controller.rb'><pre>  def index</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin_controller.rb'><pre>    @optimizely_experiments = InternalReport.where("name like 'Optimizely: %'").select("DISTINCT(NAME)").map{|p| p["NAME"]}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin_controller.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_controllers_admin_access_controller_rb"> ./app/controllers/admin/access_controller.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>class Admin::AccessController < ApplicationController</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  layout "admin"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  before_filter :require_admin, :only => [:reset_password, :do_reset_password, :logout_admin]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  before_filter :redirect_admin, :only => :step1</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  def do_reset_password</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    if current_admin.password_hashed != current_admin.encrypt_password(params[:existing_password])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      @error = "Your existing password is incorrect"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    elsif params[:new_password] != params[:new_password_again]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      @error = "Your new passwords did not match each other"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    elsif !params[:new_password] or params[:new_password].length < Admin::MIN_PASSWORD_LENGTH</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      @error = "New password must be at least #{Admin::MIN_PASSWORD_LENGTH} chars"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    elsif params[:new_password] == params[:existing_password]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      @error = "New password must be different than existing password."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    if @error</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      flash.now[:error] = @error</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      render :reset_password</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      current_admin.reset_password!(params[:new_password])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      redirect_to admin_path</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  def logout_admin</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    current_admin.logout!</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    session.delete(:admin_token)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    flash[:success] = "You are now logged out."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    redirect_to admin_access_path</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  def process_step1</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    return redirect_to(admin_access_path) unless email = params[:login_email]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    session[:admin_access_email] = email</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    unless Admin.any_validated_access_token?(access_token) || verify_recaptcha</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      return redirect_to(admin_access_path)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    Admin.record_login_attempt(email, remote_ip, user_agent, access_cookie)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    if @admin = Admin.where(:email => email).first</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      process_login(@admin)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      # Always render step2 - this way attackers don't know if the login</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      # email is valid or not</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      render(:step2)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  def process_step2</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    return redirect_to(admin_access_path) unless email = session[:admin_access_email]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    @admin = Admin.where(:email => email).first</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    return render(:step2) unless @admin</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    return redirect_to(admin_locked_path) if @admin.locked?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    return render(:validate_access_token) unless @admin.has_validated_access_token?(access_token)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    if @admin.validate_login(access_token, params[:admin_password], params[:mobile_code])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      # Successful login</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      session[:admin_token] = @admin.session_token</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      redirect_to admin_path</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      flash.now[:error] = "Invalid mobile code or password or too many attempts"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      render :step2</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  def lockdown</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    if Admin.validate_lockdown(params[:email], params[:key], params[:timestamp].to_i)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      Admin.lockdown!</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      render :text => "Admins have been successfully locked down"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      render :text => "Admins could not be locked down"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  def validate_access_token</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    return redirect_to(admin_access_path) unless email = params[:email]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    admin = Admin.where(:email => email).first</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    return render(:step2) unless admin</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    return redirect_to(admin_locked_path) if admin.locked?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    if admin.validate_access_token(access_token, params[:key], params[:timestamp].to_i)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      process_login(admin)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      render :validate_access_token</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  private</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  def process_login(admin)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    return redirect_to(admin_locked_path) if admin.locked?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    # If they have validated the access token then we</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    # can render step 2</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    if admin.has_validated_access_token?(access_token)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      if admin.needs_mobile_code?(access_token)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>        admin.send_new_mobile_code!</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      admin.send_validate_access_token_email!(access_token)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>      return render(:validate_access_token)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    # Might get locked in the process of sending a new mobile code</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    # (exceeds attempts)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    return redirect_to(admin_locked_path) if admin.locked?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    render(:step2)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  def redirect_admin</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>    return redirect_to(admin_path) if current_admin</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/admin/access_controller.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_controllers_user_controller_rb"> ./app/controllers/user_controller.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>class UserController < ApplicationController</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>  layout "with_sidebar"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>  before_filter :authenticate_user!</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>  before_filter :load_user, :only => [:edit, :update]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>  def update</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>    if @user.update_attributes(user_params)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>      sign_in @user, :bypass => true</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>      flash[:success] = "Your settings have been updated."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>      redirect_to current_site ? site_path(current_site) : new_site_path</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>      flash.now[:error] = "There was a problem updating your settings."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>      render :action => :edit</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>  private</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>  def load_user</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>    @user = current_user</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>  def user_params</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>    if params[:user] && params[:user][:password].blank?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>      params[:user].delete(:password)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>      params[:user].delete(:password_confirmation)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>    params.require(:user).permit(:email, :first_name, :last_name, :password, :password_confirmation)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/user_controller.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_models_validators_url_validator_rb"> ./app/models/validators/url_validator.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/validators/url_validator.rb'><pre>class UrlValidator < ActiveModel::Validator</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/validators/url_validator.rb'><pre>  def validate(record)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/validators/url_validator.rb'><pre>    field = options[:url_field]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/validators/url_validator.rb'><pre>    url = record.public_send(field)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/validators/url_validator.rb'><pre>    record.errors.add(field, "can't be blank") unless url.present?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/validators/url_validator.rb'><pre>    uri = Addressable::URI.parse(url)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/validators/url_validator.rb'><pre>    if !%w{http https}.include?(uri.scheme) || uri.host.blank? || !uri.ip_based? && url !~ /(^$)|(^(http|https):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(([0-9]{1,5})?\/.*)?$)/ix</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/validators/url_validator.rb'><pre>      record.errors.add(field, "is invalid")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/validators/url_validator.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/validators/url_validator.rb'><pre>  rescue Addressable::URI::InvalidURIError</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/validators/url_validator.rb'><pre>    record.errors.add(field, "is invalid")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/validators/url_validator.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/validators/url_validator.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_controllers_application_controller_rb"> ./app/controllers/application_controller.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>class ApplicationController < ActionController::Base</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  protect_from_forgery with: :exception</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  helper_method :access_token, :current_admin, :impersonated_user, :current_site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  before_filter :record_tracking_param</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  def access_token</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    @access_token ||= Digest::SHA256.hexdigest(["hellobar", remote_ip, user_agent, access_cookie, "a776b"].join)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  def access_cookie</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    cookies[:adxs] ||= {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>      :value => Digest::SHA256.hexdigest(["a", rand(10_000), Time.now.to_f, user_agent, "d753d"].collect{|s| s.to_s}.join),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>      :expires => 90.days.from_now,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>      :httponly => true</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  def user_agent</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    request.user_agent</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  def remote_ip</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    request.remote_ip</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  def current_admin</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    @current_admin ||= Admin.validate_session(access_token, session[:admin_token])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  def require_admin</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    if current_admin.nil?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>      redirect_to root_path</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    elsif current_admin.needs_to_set_new_password?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>      redirect_to(admin_reset_password_path) unless URI.parse(url_for).path == admin_reset_password_path</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  def after_sign_in_path_for(resource)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    if current_user.sites.any?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>      site_path(current_user.sites.last)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>      new_site_path</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  def current_user</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    impersonated_user || super</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  def authenticate_user!</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    impersonated_user ? true : super</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  def impersonated_user</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    current_admin && session[:impersonated_user] ? User.find_by_id(session[:impersonated_user]) : nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  def current_site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    if current_user && session[:current_site]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>      current_user.sites.where(:id => session[:current_site]).first || current_user.sites.first</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    elsif current_user</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>      current_user.sites.first</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>      nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  def record_tracking_param</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>    Hello::TrackingParam.track(params[:trk]) if params[:trk]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/application_controller.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_controllers_contact_submissions_controller_rb"> ./app/controllers/contact_submissions_controller.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>class ContactSubmissionsController < ApplicationController</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>  before_filter :authenticate_user!</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>  include SitesHelper</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>  def email_developer</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>    @site = current_user.sites.find(params[:site_id])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>    if params[:developer_email].blank?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>      flash[:error] = "Please enter your developer's email address."</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>      email_params = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>        :site_url => display_url_for_site(@site),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>        :script_url => @site.script_url,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>        :user_email => current_user.email</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>      }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>      MailerGateway.send_email("Contact Developer 2", params[:developer_email], email_params)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>      flash[:success] = "We've sent the installation instructions to your developer!"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>    redirect_to site_path(@site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>  def generic_message</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>    @site = current_user.sites.find_by_id(params[:site_id])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>    email_params = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>      :first_name => current_user.first_name,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>      :last_name => current_user.last_name,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>      :email => current_user.email,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>      :message => params[:message],</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>      :preview => (params[:message] || "")[0, 50]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>    }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>    email_params.merge!(:website => @site.url) if @site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>    MailerGateway.send_email("Contact Form", "support@hellobar.com", email_params)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>    flash[:success] = "Your message has been sent!"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>    redirect_to params[:return_to]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/contact_submissions_controller.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_models_site_rb"> ./app/models/site.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>class Site < ActiveRecord::Base</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  include GuaranteedQueue::Delay</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  has_many :rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  has_many :bars, through: :rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  has_many :site_memberships, dependent: :destroy</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  has_many :users, through: :site_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  before_validation :standardize_url</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  before_destroy :blank_out_script</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  validates_with UrlValidator, url_field: :url</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  def owner</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    if membership = site_memberships.where(:role => "owner").first</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>      membership.user</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>      nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  def has_script_installed?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    if script_installed_at.nil? && bars.any?{|b| b.total_views > 0}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>      update_attribute(:script_installed_at, Time.current)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>      InternalEvent.create(:timestamp => script_installed_at.to_i, :target_type => "user", :target_id => owner.try(:id), :name => "Received Data")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    script_installed_at.present?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  def script_url</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    "s3.amazonaws.com/#{Hellobar::Settings[:s3_bucket]}/#{script_name}"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  def script_name</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    raise "script_name requires ID" unless persisted?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    "#{Digest::SHA1.hexdigest("bar#{id}cat")}.js"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  def script_content(compress = true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    ScriptGenerator.new(self, :compress => compress).generate_script</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  def generate_script</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    delay :generate_static_assets</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  def blank_out_script</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    delay :generate_blank_static_assets</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  def get_all_time_data</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    @all_time_data ||= Hello::BarData.get_all_time_data(id)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  def create_default_rule</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    return unless rules.empty?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    rules.create!(:name => "Everyone",</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>                  :match => Rule::MATCH_ON[:all])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  private</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  def generate_static_assets(options = {})</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    update_attribute(:script_attempted_to_generate_at, Time.now)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    Timeout::timeout(20) do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>      generated_script_content = options[:script_content] || script_content(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>      Hello::AssetStorage.new.create_or_update_file_with_contents(script_name, generated_script_content)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    update_attribute(:script_generated_at, Time.now)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  def generate_blank_static_assets</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    generate_static_assets(:script_content => "")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  def standardize_url</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    url = Addressable::URI.heuristic_parse(self.url)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>    self.url = "#{url.scheme}://#{url.normalized_host}"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_controllers_site_elements_controller_spec_rb"> ./spec/controllers/site_elements_controller_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/site_elements_controller_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/site_elements_controller_spec.rb'><pre>describe SiteElementsController do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/site_elements_controller_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_models_condition_date_condition_rb"> ./app/models/condition/date_condition.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>class DateCondition < Condition</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>  # { start_date: <DateTime>, end_date: <DateTime> }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>  serialize :value, Hash</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>  def self.create_from_params(start_date, end_date)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>    return unless [start_date, end_date].any?(&:present?)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>    if [start_date, end_date].all?(&:present?)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>      operand = Condition::OPERANDS[:is_between]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>      value = { 'start_date' => start_date, 'end_date' => end_date }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>    elsif start_date.present?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>      operand = Condition::OPERANDS[:is_after]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>      value = { 'start_date' => start_date }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>    elsif end_date.present?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>      operand = Condition::OPERANDS[:is_before]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>      value = { 'end_date' => end_date }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>    create operand: operand,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>           value: value</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/date_condition.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_models_condition_url_condition_rb"> ./app/models/condition/url_condition.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>class UrlCondition < Condition</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>  # { include_url: <DateTime>, exclude_url: <DateTime> }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>  serialize :value, Hash</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>  def self.create_include_url(url)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>    UrlCondition.create operand: Condition::OPERANDS[:includes],</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>                        value: { 'include_url' => url }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>  def self.create_exclude_url(url)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>    UrlCondition.create operand: Condition::OPERANDS[:excludes],</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>                        value: { 'exclude_url' => url }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>  def url</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>    value['include_url'] || value['exclude_url']</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition/url_condition.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_models_internal_event_rb"> ./app/models/internal_event.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_event.rb'><pre>class InternalEvent < ActiveRecord::Base</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/internal_event.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_models_admin_login_attempt_rb"> ./app/models/admin_login_attempt.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/admin_login_attempt.rb'><pre>class AdminLoginAttempt < ActiveRecord::Base</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/admin_login_attempt.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_controllers_wordpress_plugin_controller_rb"> ./app/controllers/wordpress_plugin_controller.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>class WordpressPluginController < ApplicationController</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>  before_filter :authenticate_user!</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>  before_filter :load_site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>  layout false</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>  def show</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>    plugin = WordpressPlugin.new(@site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>    send_data(plugin.to_zip, :type => Mime::ZIP, :filename => "hellobar_wp_plugin.zip")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>  ensure</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>    plugin.cleanup</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>  private</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>  def load_site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>    @site = current_user.sites.find(params[:site_id])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/wordpress_plugin_controller.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_controllers_welcome_controller_rb"> ./app/controllers/welcome_controller.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/welcome_controller.rb'><pre>class WelcomeController < ApplicationController</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/welcome_controller.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_models_rule_rb"> ./app/models/rule.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/rule.rb'><pre>class Rule < ActiveRecord::Base</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/rule.rb'><pre>  MATCH_ON = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/rule.rb'><pre>    all: 'all',</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/rule.rb'><pre>    any: 'any'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/rule.rb'><pre>  }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/rule.rb'><pre>  belongs_to :site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/rule.rb'><pre>  has_many :bars</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/rule.rb'><pre>  has_many :conditions</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/rule.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_controllers_users_sessions_controller_rb"> ./app/controllers/users/sessions_controller.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/sessions_controller.rb'><pre>class Users::SessionsController < Devise::SessionsController</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/sessions_controller.rb'><pre>  def create</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/sessions_controller.rb'><pre>    if Hello::WordpressUser.email_exists?(params[:user].try(:[], :email))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/sessions_controller.rb'><pre>      render "pages/redirect_login"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/sessions_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/sessions_controller.rb'><pre>      super</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/sessions_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/sessions_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/sessions_controller.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_models_site_membership_rb"> ./app/models/site_membership.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site_membership.rb'><pre>class SiteMembership < ActiveRecord::Base</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site_membership.rb'><pre>  belongs_to :user</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site_membership.rb'><pre>  belongs_to :site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site_membership.rb'><pre>  validates :user_id, :uniqueness => {:scope => :site_id}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site_membership.rb'><pre>  validate :only_one_owner_per_site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site_membership.rb'><pre>  private</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site_membership.rb'><pre>  def only_one_owner_per_site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site_membership.rb'><pre>    if site && role == "owner" && !site.owner.nil? && site.owner != user</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site_membership.rb'><pre>      self.errors.add(:role, "cannot be owner; one already exists for this site")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site_membership.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site_membership.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/site_membership.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_controllers_users_passwords_controller_rb"> ./app/controllers/users/passwords_controller.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/passwords_controller.rb'><pre>class Users::PasswordsController < Devise::PasswordsController</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/passwords_controller.rb'><pre>  def create</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/passwords_controller.rb'><pre>    if Hello::WordpressUser.email_exists?(params[:user].try(:[], :email))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/passwords_controller.rb'><pre>      render "pages/redirect_forgot"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/passwords_controller.rb'><pre>    else</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/passwords_controller.rb'><pre>      super</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/passwords_controller.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/passwords_controller.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/controllers/users/passwords_controller.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_controllers_admin_users_controller_spec_rb"> ./spec/controllers/admin/users_controller_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>describe Admin::UsersController do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>  before(:each) do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>    @admin = admins(:joey)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>  describe "POST impersonate" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>    it "allows the admin to impersonate a user" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>      stub_current_admin(@admin)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>      post :impersonate, :id => users(:joey)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>      controller.current_user.should == users(:joey)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>  describe "DELETE unimpersonate" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>    it "allows the admin to stop impersonating a user" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>      stub_current_admin(@admin)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>      post :impersonate, :id => users(:joey)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>      controller.current_user.should == users(:joey)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>      delete :unimpersonate</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>      controller.current_user.should be_nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin/users_controller_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_controllers_admin_controller_spec_rb"> ./spec/controllers/admin_controller_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin_controller_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin_controller_spec.rb'><pre>describe AdminController do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/admin_controller_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_controllers_application_controller_spec_rb"> ./spec/controllers/application_controller_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>describe ApplicationController do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>  describe "current_site" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>    it "returns nil if no current_user" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      stub_current_user(nil)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      controller.current_site.should be_nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>    it "returns current_user's first site if nothing is set in session" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      user = stub_current_user(users(:joey))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      controller.current_site.should == user.sites.first</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>    it "returns site stored in session if available" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      user = stub_current_user(users(:joey))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      site = user.sites.last</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      session[:current_site] = site.id</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      controller.current_site.should == site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>    it "returns user's first site if site stored in session is not available or doesn't belong to user" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      user = stub_current_user(users(:joey))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      session[:current_site] = sites(:polymathic).id</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      controller.current_site.should == user.sites.first</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>    it "returns nil if user has no sites" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      stub_current_user(users(:wootie))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      controller.current_site.should be_nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>  describe "record_tracking_param" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>    it "records the tracking param" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      controller.stub(:params => {:trk => "asdf"})</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      Hello::TrackingParam.should_receive(:track).with("asdf")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>      controller.record_tracking_param</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/application_controller_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_controllers_contact_submissions_controller_spec_rb"> ./spec/controllers/contact_submissions_controller_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>describe ContactSubmissionsController do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>  it "sends a 'email your developer' message" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    dev_email = "dev@polymathic.me"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    site = sites(:zombo)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    user = stub_current_user(site.owner)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    email_params = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :site_url => "zombo.com",</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :script_url => site.script_url,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :user_email => user.email</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    MailerGateway.should_receive(:send_email).with("Contact Developer 2", dev_email, email_params)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    post :email_developer, :developer_email => dev_email, :site_id => site.id</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>  it "sends a generic message" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    site = sites(:zombo)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    user = stub_current_user(site.owner)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    message = "HELP ME"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    return_to = root_path</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    email_params = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :first_name => user.first_name,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :last_name => user.last_name,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :email => user.email,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :message => message,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :preview => message[0, 50],</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :website => site.url</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    MailerGateway.should_receive(:send_email).with("Contact Form", "support@hellobar.com", email_params)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    post :generic_message, :site_id => site.id, :message => message, :return_to => return_to</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    response.should redirect_to(return_to)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>  it "generic message works without a site" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    user = stub_current_user(users(:joey))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    message = "HELP ME"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    return_to = root_path</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    email_params = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :first_name => user.first_name,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :last_name => user.last_name,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :email => user.email,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :message => message,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>      :preview => message[0, 50],</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    MailerGateway.should_receive(:send_email).with("Contact Form", "support@hellobar.com", email_params)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    post :generic_message, :message => message, :return_to => return_to</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>    response.should redirect_to(return_to)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/contact_submissions_controller_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_app_models_condition_rb"> ./app/models/condition.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition.rb'><pre>class Condition < ActiveRecord::Base</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition.rb'><pre>  self.inheritance_column = 'segment'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition.rb'><pre>  OPERANDS = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition.rb'><pre>    is_after: 'is after',</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition.rb'><pre>    is_before: 'is before',</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition.rb'><pre>    is_between: 'is between',</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition.rb'><pre>    is: 'is',</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition.rb'><pre>    is_not: 'is not',</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition.rb'><pre>    includes: 'includes',</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition.rb'><pre>    excludes: 'excludes'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition.rb'><pre>  }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition.rb'><pre>  belongs_to :rule</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/app/models/condition.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_controllers_sites_controller_spec_rb"> ./spec/controllers/sites_controller_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>describe SitesController do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>  before(:each) do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>    @user = users(:joey)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>  describe "POST create" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>    it "allows a logged-in user to create a new site and sets him as the owner" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      stub_current_user(@user)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      mock_storage = double("asset_storage")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      mock_storage.should_receive(:create_or_update_file_with_contents)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      Hello::AssetStorage.stub(:new => mock_storage)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      lambda {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>        post :create, :site => {:url => "zombo.com"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      }.should change(@user.sites, :count).by(1)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      site = @user.sites.last</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      site.url.should == "http://zombo.com"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      @user.role_for_site(site).should == :owner</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>    it 'creates a site with a rule set' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      stub_current_user(@user)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      mock_storage = double("asset_storage")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      mock_storage.should_receive(:create_or_update_file_with_contents)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      Hello::AssetStorage.stub(:new => mock_storage)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      post :create, :site => {:url => "zombo.com"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      site = @user.sites.last</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      site.rules.size.should == 1</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>  describe "GET show" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>    it "sets current_site session value" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      stub_current_user(@user)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      site = @user.sites.last</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      get :show, :id => site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>      session[:current_site].should == site.id</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/sites_controller_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_controllers_user_controller_spec_rb"> ./spec/controllers/user_controller_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>describe UserController do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>  before(:each) do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>    @user = users(:joey)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>  describe "PUT update" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>    it "allows the user to change their password" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>      stub_current_user(@user)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>      original_hash = @user.encrypted_password</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>      put :update, :user => {:password => "asdfffff", :password_confirmation => "asdfffff"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>      @user.reload.encrypted_password.should_not == original_hash</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>    it "allows the user to change other settings with blank password params" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>      stub_current_user(@user)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>      put :update, :user => {:first_name => "Sexton", :last_name => "Hardcastle", :password => "", :password_confirmation => ""}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>      @user.reload.first_name.should == "Sexton"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>      @user.reload.last_name.should == "Hardcastle"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/user_controller_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_controllers_users_passwords_controller_spec_rb"> ./spec/controllers/users/passwords_controller_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>describe Users::PasswordsController do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>  before(:each) do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>    @request.env["devise.mapping"] = Devise.mappings[:user]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>  describe "POST create" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>    it "sends a password reset with valid params" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>      user = users(:joey)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>      MailerGateway.should_receive(:send_email).with("Reset Password", user.email, anything)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>      post :create, :user => {:email => user.email}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>    it "redirects if trying to reset with an email that's in the wordpress database" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>      Hello::WordpressUser.should_receive(:email_exists?).with("user@website.com").and_return(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>      post :create, :user => {:email => "user@website.com"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>      response.should render_template("pages/redirect_forgot")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/passwords_controller_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_controllers_users_sessions_controller_spec_rb"> ./spec/controllers/users/sessions_controller_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>describe Users::SessionsController do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>  before(:each) do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>    @request.env["devise.mapping"] = Devise.mappings[:user]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>  describe "POST create" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>    it "logs in a user with valid params" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>      controller.current_user.should be_nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>      post :create, :user => {:email => "joey@polymathic.me", :password => "password"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>      controller.current_user.should == users(:joey)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>    it "should redirect if trying to sign in with an email that's in the wordpress database" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>      Hello::WordpressUser.should_receive(:email_exists?).with("user@website.com").and_return(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>      post :create, :user => {:email => "user@website.com", :password => "asdfasdf"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>      response.should render_template("pages/redirect_login")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/users/sessions_controller_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_controllers_welcome_controller_spec_rb"> ./spec/controllers/welcome_controller_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/welcome_controller_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/welcome_controller_spec.rb'><pre>describe WelcomeController do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/welcome_controller_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_controllers_wordpress_plugin_controller_spec_rb"> ./spec/controllers/wordpress_plugin_controller_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/wordpress_plugin_controller_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/wordpress_plugin_controller_spec.rb'><pre>describe WordpressPluginController do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/wordpress_plugin_controller_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/wordpress_plugin_controller_spec.rb'><pre>  it "generates the wordpress plugin without errors" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/wordpress_plugin_controller_spec.rb'><pre>    site = sites(:zombo)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/wordpress_plugin_controller_spec.rb'><pre>    stub_current_user(site.owner)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/wordpress_plugin_controller_spec.rb'><pre>    get :show, :site_id => site.to_param</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/wordpress_plugin_controller_spec.rb'><pre>    response.should be_success</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/wordpress_plugin_controller_spec.rb'><pre>    response.header["Content-Type"].should == "application/zip"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/wordpress_plugin_controller_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/controllers/wordpress_plugin_controller_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_helpers_admin_users_helper_spec_rb"> ./spec/helpers/admin/users_helper_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/admin/users_helper_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/admin/users_helper_spec.rb'><pre># Specs in this file have access to a helper object that includes</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/admin/users_helper_spec.rb'><pre># the Admin::UsersHelper. For example:</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/admin/users_helper_spec.rb'><pre>#</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/admin/users_helper_spec.rb'><pre># describe Admin::UsersHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/admin/users_helper_spec.rb'><pre>#   describe "string concat" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/admin/users_helper_spec.rb'><pre>#     it "concats two strings with spaces" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/admin/users_helper_spec.rb'><pre>#       expect(helper.concat_strings("this","that")).to eq("this that")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/admin/users_helper_spec.rb'><pre>#     end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/admin/users_helper_spec.rb'><pre>#   end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/admin/users_helper_spec.rb'><pre># end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/admin/users_helper_spec.rb'><pre>describe Admin::UsersHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/admin/users_helper_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_helpers_contact_submissions_helper_spec_rb"> ./spec/helpers/contact_submissions_helper_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/contact_submissions_helper_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/contact_submissions_helper_spec.rb'><pre># Specs in this file have access to a helper object that includes</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/contact_submissions_helper_spec.rb'><pre># the ContactSubmissionsHelper. For example:</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/contact_submissions_helper_spec.rb'><pre>#</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/contact_submissions_helper_spec.rb'><pre># describe ContactSubmissionsHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/contact_submissions_helper_spec.rb'><pre>#   describe "string concat" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/contact_submissions_helper_spec.rb'><pre>#     it "concats two strings with spaces" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/contact_submissions_helper_spec.rb'><pre>#       expect(helper.concat_strings("this","that")).to eq("this that")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/contact_submissions_helper_spec.rb'><pre>#     end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/contact_submissions_helper_spec.rb'><pre>#   end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/contact_submissions_helper_spec.rb'><pre># end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/contact_submissions_helper_spec.rb'><pre>describe ContactSubmissionsHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/contact_submissions_helper_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_helpers_email_digest_helper_spec_rb"> ./spec/helpers/email_digest_helper_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>describe EmailDigestHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>  describe "bar_activity_units" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>    before(:each) do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      @bars = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>        :traffic =>                 Bar.new(:bar_type => "traffic"),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>        :email =>                   Bar.new(:bar_type => "email"),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>        :tweet_on_twitter =>        Bar.new(:bar_type => "social/tweet_on_twitter"),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>        :follow_on_twitter =>       Bar.new(:bar_type => "social/follow_on_twitter"),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>        :like_on_facebook =>        Bar.new(:bar_type => "social/like_on_facebook"),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>        :share_on_linkedin =>       Bar.new(:bar_type => "social/share_on_linkedin"),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>        :plus_one_on_google_plus => Bar.new(:bar_type => "social/plus_one_on_google_plus"),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>        :pin_on_pinterest =>        Bar.new(:bar_type => "social/pin_on_pinterest"),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>        :follow_on_pinterest =>     Bar.new(:bar_type => "social/follow_on_pinterest"),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>        :share_on_buffer =>         Bar.new(:bar_type => "social/share_on_buffer")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>    it "returns the correct units for all bar types" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:traffic]).should == "click"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:email]).should == "email"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:tweet_on_twitter]).should == "tweet"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:follow_on_twitter]).should == "follower"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:like_on_facebook]).should == "like"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:share_on_linkedin]).should == "share"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:plus_one_on_google_plus]).should == "plus one"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:pin_on_pinterest]).should == "pin"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:follow_on_pinterest]).should == "follower"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:share_on_buffer]).should == "share"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>    # not sure we'll end up needing this. also, verb is awkward for a lot of bar types.</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>#     it "optionally adds an appropriate verb" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>#       bar_activity_units(@bars[:traffic], :verb => true).should == "click recorded"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>#       bar_activity_units(@bars[:email], :verb => true).should == "email collected"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>#       bar_activity_units(@bars[:tweet_on_twitter], :verb => true).should == "tweet"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>#       bar_activity_units(@bars[:follow_on_twitter], :verb => true).should == "follow gained"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>#       bar_activity_units(@bars[:like_on_facebook], :verb => true).should == "like"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>#       bar_activity_units(@bars[:share_on_linkedin], :verb => true).should == "share"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>#       bar_activity_units(@bars[:plus_one_on_google_plus], :verb => true).should == "plus one"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>#       bar_activity_units(@bars[:pin_on_pinterest], :verb => true).should == "pin"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>#       bar_activity_units(@bars[:follow_on_pinterest], :verb => true).should == "follow gained"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>#       bar_activity_units(@bars[:share_on_buffer], :verb => true).should == "share"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>#     end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>#     it "adjusts the verb to make sense for multiple bars with different units"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>    it "optionally pluralizes the units" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:traffic], :plural => true).should == "clicks"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:email], :plural => true).should == "emails"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:tweet_on_twitter], :plural => true).should == "tweets"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:follow_on_twitter], :plural => true).should == "followers"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:like_on_facebook], :plural => true).should == "likes"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:share_on_linkedin], :plural => true).should == "shares"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:plus_one_on_google_plus], :plural => true).should == "plus ones"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:pin_on_pinterest], :plural => true).should == "pins"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:follow_on_pinterest], :plural => true).should == "followers"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units(@bars[:share_on_buffer], :plural => true).should == "shares"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>    it "consolidates multiple bar types into a unit that makes sense for all" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      other_traffic_bar = Bar.new(:bar_type => "traffic")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units([other_traffic_bar, @bars[:traffic]]).should == "click"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>      bar_activity_units([other_traffic_bar, @bars[:traffic], @bars[:email]]).should == "action"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/email_digest_helper_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_helpers_site_elements_helper_spec_rb"> ./spec/helpers/site_elements_helper_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/site_elements_helper_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/site_elements_helper_spec.rb'><pre># Specs in this file have access to a helper object that includes</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/site_elements_helper_spec.rb'><pre># the SiteElementsHelper. For example:</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/site_elements_helper_spec.rb'><pre>#</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/site_elements_helper_spec.rb'><pre># describe SiteElementsHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/site_elements_helper_spec.rb'><pre>#   describe "string concat" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/site_elements_helper_spec.rb'><pre>#     it "concats two strings with spaces" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/site_elements_helper_spec.rb'><pre>#       expect(helper.concat_strings("this","that")).to eq("this that")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/site_elements_helper_spec.rb'><pre>#     end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/site_elements_helper_spec.rb'><pre>#   end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/site_elements_helper_spec.rb'><pre># end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/site_elements_helper_spec.rb'><pre>describe SiteElementsHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/site_elements_helper_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_helpers_sites_helper_spec_rb"> ./spec/helpers/sites_helper_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/sites_helper_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/sites_helper_spec.rb'><pre>describe SitesHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/sites_helper_spec.rb'><pre>  describe "display_url_for_site" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/sites_helper_spec.rb'><pre>    it "returns shorter URLs for different sites" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/sites_helper_spec.rb'><pre>      site = Site.new(:url => "http://asdf.com")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/sites_helper_spec.rb'><pre>      helper.display_url_for_site(site).should == "asdf.com"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/sites_helper_spec.rb'><pre>      site = Site.new(:url => "http://cs.horse.bike")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/sites_helper_spec.rb'><pre>      helper.display_url_for_site(site).should == "cs.horse.bike"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/sites_helper_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/sites_helper_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/sites_helper_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_helpers_user_helper_spec_rb"> ./spec/helpers/user_helper_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/user_helper_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/user_helper_spec.rb'><pre># Specs in this file have access to a helper object that includes</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/user_helper_spec.rb'><pre># the UserHelper. For example:</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/user_helper_spec.rb'><pre>#</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/user_helper_spec.rb'><pre># describe UserHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/user_helper_spec.rb'><pre>#   describe "string concat" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/user_helper_spec.rb'><pre>#     it "concats two strings with spaces" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/user_helper_spec.rb'><pre>#       expect(helper.concat_strings("this","that")).to eq("this that")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/user_helper_spec.rb'><pre>#     end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/user_helper_spec.rb'><pre>#   end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/user_helper_spec.rb'><pre># end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/user_helper_spec.rb'><pre>describe UserHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/user_helper_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_helpers_users_passwords_helper_spec_rb"> ./spec/helpers/users/passwords_helper_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/passwords_helper_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/passwords_helper_spec.rb'><pre># Specs in this file have access to a helper object that includes</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/passwords_helper_spec.rb'><pre># the Users::PasswordsHelper. For example:</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/passwords_helper_spec.rb'><pre>#</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/passwords_helper_spec.rb'><pre># describe Users::PasswordsHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/passwords_helper_spec.rb'><pre>#   describe "string concat" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/passwords_helper_spec.rb'><pre>#     it "concats two strings with spaces" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/passwords_helper_spec.rb'><pre>#       expect(helper.concat_strings("this","that")).to eq("this that")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/passwords_helper_spec.rb'><pre>#     end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/passwords_helper_spec.rb'><pre>#   end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/passwords_helper_spec.rb'><pre># end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/passwords_helper_spec.rb'><pre>describe Users::PasswordsHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/passwords_helper_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_helpers_users_sessions_helper_spec_rb"> ./spec/helpers/users/sessions_helper_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/sessions_helper_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/sessions_helper_spec.rb'><pre># Specs in this file have access to a helper object that includes</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/sessions_helper_spec.rb'><pre># the Users::SessionsHelper. For example:</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/sessions_helper_spec.rb'><pre>#</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/sessions_helper_spec.rb'><pre># describe Users::SessionsHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/sessions_helper_spec.rb'><pre>#   describe "string concat" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/sessions_helper_spec.rb'><pre>#     it "concats two strings with spaces" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/sessions_helper_spec.rb'><pre>#       expect(helper.concat_strings("this","that")).to eq("this that")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/sessions_helper_spec.rb'><pre>#     end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/sessions_helper_spec.rb'><pre>#   end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/sessions_helper_spec.rb'><pre># end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/sessions_helper_spec.rb'><pre>describe Users::SessionsHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/users/sessions_helper_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_helpers_wordpress_plugin_helper_spec_rb"> ./spec/helpers/wordpress_plugin_helper_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/wordpress_plugin_helper_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/wordpress_plugin_helper_spec.rb'><pre># Specs in this file have access to a helper object that includes</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/wordpress_plugin_helper_spec.rb'><pre># the WordpressPluginHelper. For example:</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/wordpress_plugin_helper_spec.rb'><pre>#</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/wordpress_plugin_helper_spec.rb'><pre># describe WordpressPluginHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/wordpress_plugin_helper_spec.rb'><pre>#   describe "string concat" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/wordpress_plugin_helper_spec.rb'><pre>#     it "concats two strings with spaces" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/wordpress_plugin_helper_spec.rb'><pre>#       expect(helper.concat_strings("this","that")).to eq("this that")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/wordpress_plugin_helper_spec.rb'><pre>#     end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/wordpress_plugin_helper_spec.rb'><pre>#   end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/wordpress_plugin_helper_spec.rb'><pre># end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/wordpress_plugin_helper_spec.rb'><pre>describe WordpressPluginHelper do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/helpers/wordpress_plugin_helper_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_lib_hello_email_digest_spec_rb"> ./spec/lib/hello/email_digest_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>require "spec_helper"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>describe Hello::EmailDigest do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>  describe "email_name" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "returns the proper name for sites that have a script installed" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      site = double("site", :created_at => 1.day.ago, :script_installed_at => 1.day.ago)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::EmailDigest.email_name(site).should == "installed_v1_w1"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      site = double("site", :created_at => 8.days.ago, :script_installed_at => 8.days.ago)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::EmailDigest.email_name(site).should == "installed_v1_w2"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "returns the proper name for sites that don't have a script installed" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      site = double("site", :created_at => 1.day.ago, :script_installed_at => nil)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::EmailDigest.email_name(site).should == "not_installed_v1_w1"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      site = double("site", :created_at => 8.days.ago, :script_installed_at => nil)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::EmailDigest.email_name(site).should == "not_installed_v1_w2"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "uses the script_installed_at attribute for determining cohort when installed" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      site = double("site", :created_at => 8.days.ago, :script_installed_at => 1.day.ago)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::EmailDigest.email_name(site).should == "installed_v1_w1"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>  describe "site_metrics" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    before(:each) do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Timecop.freeze(Time.parse("Mon Apr 28 06:30:00 CDT 2014"))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @site = sites(:zombo)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @social_bar = bars(:zombo_twitter)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @traffic_bar = bars(:zombo_traffic)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @email_bar = bars(:zombo_email)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    after(:each) do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Timecop.return</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "does not include lift unless the script has been installed for two full weeks" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::BarData.should_receive(:get_over_time_data).and_return([</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @social_bar.id, 1.day.ago.strftime("%Y%m%d").to_i, 12, 11)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      ])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data = Hello::EmailDigest.site_metrics(@site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:social][:views][:lift].should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:social][:actions][:lift].should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:social][:conversion][:lift].should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "does not include data for bar types that haven't been created" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::BarData.should_receive(:get_over_time_data).and_return([</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @social_bar.id, 1.day.ago.strftime("%Y%m%d").to_i, 12, 11)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      ])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data = Hello::EmailDigest.site_metrics(@site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:traffic].should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:email].should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "separates statistics by bar type" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::BarData.should_receive(:get_over_time_data).and_return([</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @social_bar.id, 1.day.ago.strftime("%Y%m%d").to_i, 12, 11),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @traffic_bar.id, 1.day.ago.strftime("%Y%m%d").to_i, 34, 33),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @traffic_bar.id, 2.days.ago.strftime("%Y%m%d").to_i, 56, 55)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      ])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data = Hello::EmailDigest.site_metrics(@site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:social][:views][:n].should == 12</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:social][:actions][:n].should == 11</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:social][:conversion][:n].should be_within(0.01).of(11.0/12)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:traffic][:views][:n].should == 90</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:traffic][:actions][:n].should == 88</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:traffic][:conversion][:n].should be_within(0.01).of(88.0/90)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:email].should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "includes lift data if the script has been installed for two full weeks and there is enough bar data" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::BarData.should_receive(:get_over_time_data).and_return([</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @traffic_bar.id, 1.day.ago.strftime("%Y%m%d").to_i, 34, 33),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @traffic_bar.id, 9.days.ago.strftime("%Y%m%d").to_i, 56, 55)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      ])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @site.script_installed_at = 15.days.ago</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data = Hello::EmailDigest.site_metrics(@site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:traffic][:views][:n].should == 34</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:traffic][:actions][:n].should == 33</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:traffic][:conversion][:n].should be_within(0.01).of(33.0/34)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:traffic][:views][:lift].should be_within(0.01).of((34 - 56) / 56.0)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:traffic][:actions][:lift].should be_within(0.01).of((33 - 55) / 55.0)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:traffic][:conversion][:lift].should be_within(0.01).of(((33.0/34) - (55.0/56)) / (55.0/56))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "totals this week's data" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::BarData.should_receive(:get_over_time_data).and_return([</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @social_bar.id, 1.day.ago.strftime("%Y%m%d").to_i, 12, 11),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @traffic_bar.id, 1.day.ago.strftime("%Y%m%d").to_i, 34, 33),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @traffic_bar.id, 8.days.ago.strftime("%Y%m%d").to_i, 56, 55)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      ])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @site.script_installed_at = 15.days.ago</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data = Hello::EmailDigest.site_metrics(@site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:total][:views][:n].should == 46</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:total][:actions][:n].should == 44</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:total][:conversion][:n].should be_within(0.01).of(44.0/46)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:total][:views][:lift].should be_within(0.01).of((46 - 56) / 56.0)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:total][:actions][:lift].should be_within(0.01).of((44 - 55) / 55.0)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:total][:conversion][:lift].should be_within(0.01).of(((44.0/46) - (55.0/56)) / (55.0 / 56))</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "handles no bar data" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::BarData.should_receive(:get_over_time_data).and_return([])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data = Hello::EmailDigest.site_metrics(@site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:social].should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:traffic].should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:email].should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:total].should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "works when there's data for last week but not this week" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::BarData.should_receive(:get_over_time_data).and_return([</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @email_bar.id, 8.days.ago.strftime("%Y%m%d").to_i, 0, 0),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @traffic_bar.id, 8.days.ago.strftime("%Y%m%d").to_i, 56, 55)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      ])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @site.script_installed_at = 15.days.ago</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data = Hello::EmailDigest.site_metrics(@site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:total][:views][:n].should == 0</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "computes lift totals correctly if there were no conversions last week" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::BarData.should_receive(:get_over_time_data).and_return([</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @email_bar.id, 8.days.ago.strftime("%Y%m%d").to_i, 10, 0),</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Hello::BarData.new(@site.id, @email_bar.id, 1.days.ago.strftime("%Y%m%d").to_i, 10, 4)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      ])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @site.script_installed_at = 15.days.ago</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data = Hello::EmailDigest.site_metrics(@site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:total][:views][:lift].should == 0.0</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:total][:actions][:lift].should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      data[:total][:conversion][:lift].should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>  describe "create_bar_cta" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    before do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @metrics = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        :traffic => {:conversion => {:n => 0.8}},</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        :email =>   {:conversion => {:n => 0.4}},</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        :social =>  {:conversion => {:n => 0.2}}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @url = ""</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @site = sites(:polymathic)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @site.create_default_rule</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "suggests creation of a social bar if there aren't any" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @site.rules.first.bars = [</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Bar.new.tap{|b| b.bar_type = "traffic"},</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Bar.new.tap{|b| b.bar_type = "email"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      ]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::EmailDigest.create_bar_cta(@site, @metrics, @url).should =~ /gaining followers/</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "suggests creation of an email bar if there aren't any" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @site.rules.first.bars = [</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Bar.new.tap{|b| b.bar_type = "traffic"},</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Bar.new.tap{|b| b.bar_type = "social/tweet_on_twitter"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      ]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::EmailDigest.create_bar_cta(@site, @metrics, @url).should =~ /collecting email/</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "suggests creation of a traffic bar if there aren't any" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @site.rules.first.bars = [</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Bar.new.tap{|b| b.bar_type = "social/tweet_on_twitter"},</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Bar.new.tap{|b| b.bar_type = "email"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      ]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::EmailDigest.create_bar_cta(@site, @metrics, @url).should =~ /driving traffic/</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "suggests creation of a second bar of the worst-performing type, if at least one of each bar already exists" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @site.rules.first.bars = [</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Bar.new.tap{|b| b.bar_type = "social/follow_on_twitter"},</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Bar.new.tap{|b| b.bar_type = "email"},</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Bar.new.tap{|b| b.bar_type = "traffic"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      ]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::EmailDigest.create_bar_cta(@site, @metrics, @url).should =~ /Start testing more social bars/</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    it "uses dynamic bar units in 'worst-performing' CTA" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      @site.rules.first.bars = [</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Bar.new.tap{|b| b.bar_type = "social/follow_on_twitter"},</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Bar.new.tap{|b| b.bar_type = "email"},</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>        Bar.new.tap{|b| b.bar_type = "traffic"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      ]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>      Hello::EmailDigest.create_bar_cta(@site, @metrics, @url).should =~ /get more followers/</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/email_digest_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_lib_hello_tracking_param_spec_rb"> ./spec/lib/hello/tracking_param_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>require "spec_helper"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>describe Hello::TrackingParam do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>  it "encodes and decodes a tracker" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>    user_id = "1"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>    action = "click"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>    data = "some url"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>    tracker = Hello::TrackingParam.encode_tracker(user_id, action, data)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>    Hello::TrackingParam.decode_tracker(tracker).should == [user_id, action, data]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>    URI::escape(tracker).should == tracker</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>  it "can handle cgi-escaped params" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>    tracker = "MTIvLy9vcGVuLy8vRHJpcCAxLy8vMDk0MDhmZjk%3D"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>    Hello::TrackingParam.decode_tracker(tracker).should == ["12", "open", "Drip 1"]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>  describe "::track" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>    it "decodes and records a tracking parameters" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>      tracker = Hello::TrackingParam.encode_tracker("1", "click", "some url")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>      Hello::Tracking.should_receive(:track_event).with("user", "1", "Clicked link: some url")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>      Hello::TrackingParam.track(tracker)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/hello/tracking_param_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_lib_legacy_migrator_date_time_converter_spec_rb"> ./spec/lib/legacy_migrator/date_time_converter_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>describe LegacyMigrator::DateTimeConverter do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>  class SexyTime</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    extend LegacyMigrator::DateTimeConverter</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>  context '#convert_start_time' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    it 'returns nil if start time is blank' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      SexyTime.convert_start_time('', '').should be_blank</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    it 'converts start time properly' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      date_string = "2014-12-25"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      timezone = "(GMT-05:00) Eastern Time (US & Canada)"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      expected_time_string = "2014-12-25T00:00:00-05:00"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      SexyTime.convert_start_time(date_string, timezone).to_s.should == expected_time_string</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    it 'handles crazy other timezones just in case' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      date_string = "2014-12-25"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      timezone = "(GMT-11:00) American Samoa"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      expected_time_string = "2014-12-25T00:00:00-11:00"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      SexyTime.convert_start_time(date_string, timezone).to_s.should == expected_time_string</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    it 'handles visitor as a UTC timezone' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      date_string = "2014-12-25"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      timezone = "visitor"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      expected_time_string = "2014-12-25T00:00:00+00:00"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      SexyTime.convert_start_time(date_string, timezone).to_s.should == expected_time_string</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>  context '#convert_end_time' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    it 'returns nil if end time is blank' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      SexyTime.convert_end_time('', '').should be_blank</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    it 'converts end time properly' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      date_string = "2014-12-25"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      timezone = "(GMT-05:00) Eastern Time (US & Canada)"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      expected_time_string = "2014-12-25T23:59:59-05:00"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      SexyTime.convert_end_time(date_string, timezone).to_s.should == expected_time_string</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    it 'handles crazy other timezones just in case' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      date_string = "2014-12-25"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      timezone = "(GMT-11:00) American Samoa"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      expected_time_string = "2014-12-25T23:59:59-11:00"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      SexyTime.convert_end_time(date_string, timezone).to_s.should == expected_time_string</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    it 'handles visitor as a UTC timezone' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      date_string = "2014-12-25"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      timezone = "visitor"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      expected_time_string = "2014-12-25T23:59:59+00:00"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>      SexyTime.convert_end_time(date_string, timezone).to_s.should == expected_time_string</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator/date_time_converter_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_lib_legacy_migrator_spec_rb"> ./spec/lib/legacy_migrator_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>describe LegacyMigrator, '.migrate_sites_and_users_and_memberships' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  let(:legacy_site) { double 'legacy_site', legacy_site_id: 44332211, id: 11223344, base_url: 'http://baller4ever.sho', account_id: 1, created_at: Time.parse('1875-01-30'), updated_at: Time.parse('1875-01-31'), script_installed_at: Time.now, generated_script: Time.now, attempted_generate_script: Time.now }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  context 'site migration' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    before do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator::LegacySite.should_receive(:find_each).and_yield(legacy_site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    it 'creates a new site with LegacySite#legacy_site_id if present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.stub :create_user_and_membership</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>        LegacyMigrator.migrate_sites_and_users_and_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      }.to change{ Site.exists?(legacy_site.legacy_site_id) }.from(false).to(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    it 'creates a new site with LegacySite#id' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      legacy_site.stub legacy_site_id: nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.stub :create_user_and_membership</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>        LegacyMigrator.migrate_sites_and_users_and_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      }.to change{ Site.exists?(legacy_site.id) }.from(false).to(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    it 'creates a new site with LegacySite#created_at' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.stub :create_user_and_membership</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.migrate_sites_and_users_and_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      Site.find(legacy_site.legacy_site_id).created_at.should == legacy_site.created_at</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    it 'creates a new site with LegacySite#updated_at' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.stub :create_user_and_membership</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.migrate_sites_and_users_and_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      Site.find(legacy_site.legacy_site_id).updated_at.should == legacy_site.updated_at</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  context 'user and membership migration' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    before do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator::LegacySite.should_receive(:find_each).and_yield(legacy_site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      legacy_user.stub legacy_user_id: 11223344, id: 44332211, email: "rand#{rand(10_0000)}-#{rand(10_000)}@email.com", original_created_at: Time.parse('1824-05-07')</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    let(:legacy_account) { double 'legacy_account', memberships: [legacy_membership] }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    let(:legacy_membership) { double 'legacy_membership', id: 1, user: legacy_user }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    let(:legacy_user) { LegacyMigrator::LegacyUser.new }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    before do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator::LegacyAccount.stub find: legacy_account</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    it 'does not create a user if it already exists' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      User.stub :exists? => true</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>        LegacyMigrator.migrate_sites_and_users_and_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      }.to_not change(User, :count)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    it 'skips creating a user if no legacy user can be found' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      legacy_membership.stub user: nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>        LegacyMigrator.migrate_sites_and_users_and_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      }.to_not change(User, :count)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    it 'skips creating a site membership if no legacy user can be found' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      legacy_membership.stub user: nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>        LegacyMigrator.migrate_sites_and_users_and_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      }.to_not change(SiteMembership, :count)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    it 'creates a new user with the LegacyUser#legacy_user_id if it exists' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>        LegacyMigrator.migrate_sites_and_users_and_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      }.to change{ User.exists?(legacy_user.legacy_user_id) }.from(false).to(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    it 'creates a new user with the LegacyUser#id if there is no legacy id' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      legacy_user.stub legacy_user_id: nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>        LegacyMigrator.migrate_sites_and_users_and_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      }.to change{ User.exists?(legacy_user.id) }.from(false).to(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    it 'creates a new user with the LegacyUser#original_created_at if present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>        LegacyMigrator.migrate_sites_and_users_and_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      }.to change(User, :count).by(1)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      new_user = User.find(legacy_user.legacy_user_id)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      new_user.created_at.should == legacy_user.original_created_at</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    it 'creates a new user with the LegacyUser#created_at if no original_created_at is present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      legacy_user.stub original_created_at: nil, created_at: Time.parse('1971-12-19')</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.migrate_sites_and_users_and_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      new_user = User.find(legacy_user.legacy_user_id)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      new_user.created_at.should == legacy_user.created_at</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    it 'creates a new user with the LegacyUser#updated_at' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      legacy_user.stub updated_at: Time.parse('2007-10-23')</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.migrate_sites_and_users_and_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      new_user = User.find(legacy_user.legacy_user_id)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      new_user.updated_at.should == legacy_user.updated_at</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    it 'associates the site and user with a new SiteMembership' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.migrate_sites_and_users_and_memberships</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      new_user = User.find(legacy_user.legacy_user_id)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      new_site = Site.find(legacy_site.legacy_site_id)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      new_user.sites.should == [new_site]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>describe LegacyMigrator, '.migrate_goals_to_rules' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  let(:start_date) { '2013-12-01' }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  let(:end_date) { '2014-06-05' }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  let(:legacy_goal) { double 'legacy_goal', id: 12345, site_id: legacy_site.id, data_json: {}, created_at: Time.parse('2000-01-31'), updated_at: Time.now, type: "Goals::DirectTraffic", priority: 1 }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  let(:legacy_site) { double 'legacy_site', id: 123 }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  let(:bar_settings) { { 'message' => 'goes here' } }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  let(:legacy_bar) { double 'legacy_bar', legacy_bar_id: 123, active?: true, created_at: Time.parse('2001-09-11'), updated_at: Time.now, target_segment: 'dv:computer', goal_id: 'legacy_goal.id', settings_json: bar_settings }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  before do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    Site.stub :exists? => true</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    legacy_goal.stub bars: [legacy_bar]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    LegacyMigrator::LegacyGoal.should_receive(:find_each).and_yield(legacy_goal)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'doesnt create a new ruleset if the goal belongs to a site that doesnt exist' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    Site.stub :exists? => false</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    }.to_not change(Rule, :count)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'creates a new rule set with the proper attributes' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    }.to change(Rule, :count).by(1)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    rule = Rule.find(legacy_goal.id)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    rule.id.should == legacy_goal.id</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    rule.site_id.should == legacy_site.id</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    rule.created_at.to_s.should == legacy_goal.created_at.to_time.utc.to_s</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    rule.updated_at.to_s.should == legacy_goal.updated_at.to_time.utc.to_s</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'creates a new bar for every legacy bar that exists' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    }.to change(Bar, :count).by(1)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'associates all newly created bars with the new rule set' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    Rule.find(legacy_goal.id).bars.count.should == 1</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'standardizes the legacy goal type' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    bar = Rule.find(legacy_goal.id).bars.first</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    bar.bar_type.should == 'traffic'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'standardizes the legacy goal type for social bars' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    legacy_goal.stub(:type => "Goals::SocialMedia")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    legacy_goal.stub(:data_json => {"interaction" => "tweet_on_twitter"})</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    bar = Rule.find(legacy_goal.id).bars.first</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    bar.bar_type.should == 'social/tweet_on_twitter'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'copies over legacy goal social settings to bar' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    legacy_goal.stub data_json: { 'buffer_message' => 'such buffer. wow.' }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    bar = Rule.find(legacy_goal.id).bars.first</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    bar.settings.should == { 'buffer_message' => 'such buffer. wow.' }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'creates a new DateCondition if start_date is specified' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    legacy_goal.stub data_json: { 'start_date' => start_date }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    }.to change(Condition, :count).by(1)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'creates a new DateRule if end_date is specified' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    legacy_goal.stub data_json: { 'end_date' => end_date }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    }.to change(Condition, :count).by(1)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'creates a new DateRule with the proper values when both start_date and end_date are specified' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    legacy_goal.stub data_json: { 'start_date' => start_date, 'end_date' => end_date }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    condition = Rule.find(legacy_goal.id).conditions.first</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    condition.value.should == { 'start_date' => DateTime.parse(start_date + " 00:00:00"), 'end_date' => DateTime.parse(end_date + " 23:59:59") }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'creates a new UrlRule if include_urls is specified' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    legacy_goal.stub data_json: { 'include_urls' => ['http://url.com'] }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    }.to change(Condition, :count).by(1)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'creates a new UrlRule if exclude_urls is specified' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    legacy_goal.stub data_json: { 'exclude_urls' => ['http://url.com'] }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    }.to change(Condition, :count).by(1)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'creates a new UrlRule if both exclude_urls and are specified' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    data = { 'exclude_urls' => ['http://exclude.com'], 'include_urls' => ['http://include.com'] }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    legacy_goal.stub data_json: data</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    conditions = Rule.find(legacy_goal.id).conditions</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    conditions.find{|condition| condition.value.has_key?('include_url') }.value.should == { 'include_url' => 'http://include.com' }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    conditions.find{|condition| condition.value.has_key?('exclude_url') }.value.should == { 'exclude_url' => 'http://exclude.com' }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  it 'creates both a DateRule and a UrlRule for every url present when start_date and include_urls are specified' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    data = { 'exclude_urls' => ['http://include.com', 'http://another.com'], 'include_urls' => ['http://exclude.com'], 'start_date' => '01/01/2001', 'end_date' => '12/12/2012' }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    legacy_goal.stub data_json: data</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>      LegacyMigrator.migrate_goals_to_rules</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>    }.to change(Condition, :count).by(4)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/legacy_migrator_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_lib_script_generator_spec_rb"> ./spec/lib/script_generator_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>describe ScriptGenerator, '#render' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  let(:site) { double 'site', id: '1337', rules: [], bars: double('bars', active: []) }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  let(:generator) { ScriptGenerator.new(site) }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  it 'renders the site it variable' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    expected_string = "var HB_SITE_ID = #{site.id};"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.render.should include(expected_string)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  it 'renders the backend host variable' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    Hellobar::Settings.stub(:[]).with(:tracking_host).and_return("hi-there.hellobar.com")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    expected_string = "HB_BACKEND_HOST = \"hi-there.hellobar.com\";"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.render.should include(expected_string)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  it 'renders the hellobar base file' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    hellobar_base = File.read("#{Rails.root}/vendor/assets/javascripts/hellobar.base.js")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.render.should include(hellobar_base)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  it 'includes the minified hellobar css' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.stub :hellobar_container_css</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    hellobar_css = File.read("#{Rails.root}/vendor/assets/stylesheets/hellobar_script.css")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    CSSMin.should_receive(:minify).with(hellobar_css).and_return(hellobar_css)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.render.should include(hellobar_css.to_json)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  it 'includes the hellobar container css' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.stub :hellobar_base_css</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    container_css = File.read("#{Rails.root}/vendor/assets/stylesheets/hellobar_script_container.css")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    CSSMin.should_receive(:minify).with(container_css).and_return(container_css)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.render.should include(container_css.to_json)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  it 'renders the initialization of the hellobar queue object' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    hbq_initialization = "_hbq = new HBQ();"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.render.should include(hbq_initialization)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  context 'when templates are present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    it 'renders the setTemplate function on HB with the template name and markup' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      template = { name: 'yey name', markup: 'yey markup' }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.stub templates: [template]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      expected_string = "HB.setTemplate(\"yey name\", yey markup);"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.render.should include(expected_string)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    it 'renders only the setTemplate definition and 1 call per bar type' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      bar = double 'bar', bar_type: 'traffic'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      site.stub bars: double('bars', active: [bar, bar])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator = ScriptGenerator.new site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.render.scan('setTemplate').size.should == 2</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    it 'renders the setTemplate definition and 1 call per bar type for multiple types' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      traffic_bar = double 'bar', bar_type: 'traffic'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      email_bar = double 'bar', bar_type: 'email'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      site.stub bars: double('bars', active: [traffic_bar, email_bar])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator = ScriptGenerator.new site</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.render.scan('setTemplate').size.should == 3</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  context 'when rules are present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    it 'does not return any eligibility rules when eligibility is disabled' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator = ScriptGenerator.new(site, { :disable_eligibility => true })</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule = Rule.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      date_condition = DateCondition.new value: { 'start_date' => 1_000, 'end_date' => 2_000 }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      url_condition = UrlCondition.new value: { 'include_url' => 'http://good.com', 'exclude_url' => 'http://other.com' }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule.stub conditions: [date_condition, url_condition]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      site.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      unexpected_pattern = /\(new Date\(\)\)\.getTime\(\)\/(.*)|HB.umatch(.*);/</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.render.should_not match(unexpected_pattern)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    it 'has a start date constraint when present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule = Rule.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      condition = DateCondition.new value: { 'start_date' => 1_000 }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule.stub conditions: [condition]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      site.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      expected_string = '(new Date()).getTime()/1000 > 1000)'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.render.should include(expected_string)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    it 'does NOT have a start date constraint when not present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule = Rule.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      site.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      unexpected_string = /\(new Date\(\)\)\.getTime\(\)\/1000/</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.render.should_not match(unexpected_string)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    it 'has an end date constraint when present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule = Rule.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      condition = DateCondition.new value: { 'end_date' => 20_000 }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule.stub conditions: [condition]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      site.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      expected_string = '(new Date()).getTime()/1000 < 20000)'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.render.should include(expected_string)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    it 'does NOT have a start date constraint when not present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule = Rule.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      site.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      unexpected_string = /\(new Date\(\)\)\.getTime\(\)\//</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.render.should_not match(unexpected_string)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    it 'adds an exlusion constraint for all blacklisted URLs' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule = Rule.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      conditions = [UrlCondition.new(value: { 'exclude_url' => '/signup' })]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule.stub bars: double('bars', active: []), attributes: {}, conditions: conditions</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      site.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      expected_string = "(!HB.umatch(\"/signup\", document.location))"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.render.should include(expected_string)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    it 'converts excluded urls to paths' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule = Rule.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      conditions = [UrlCondition.new(value: { 'exclude_url' => 'http://soamazing.com/signup' })]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule.stub bars: double('bars', active: []), attributes: {}, conditions: conditions</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      site.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      expected_string = "(!HB.umatch(\"/signup\", document.location))"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.render.should include(expected_string)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    it 'does NOT have exclusion constraints when no sites are blacklisted' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule = Rule.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      site.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      expected_string = Regexp.new /HB.umatch(.*)/</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.render.should_not match(expected_string)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    it 'adds an inclusion constraint for all whitelisted URLs' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule = Rule.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      conditions = [UrlCondition.new(value: { 'include_url' => '/signup' })]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule.stub conditions: conditions</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      site.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      expected_string = "(HB.umatch(\"/signup\", document.location));"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.render.should include(expected_string)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    it 'does NOT have inclusion constraints when no sites are whitelisted' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule = Rule.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      expected_string = Regexp.new /HB.umatch(.*)/</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      generator.render.should_not match(expected_string)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>describe ScriptGenerator, '#rules' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  let(:site) { double 'site', id: '1337', rules: [], bars: [] }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  let(:generator) { ScriptGenerator.new(site) }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  it 'returns the proper array of hashes for a sites rules' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    rule = Rule.new id: 1</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    site.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.stub bars_for_rule: []</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    expected_hash = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      bar_json: [].to_json,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      priority: 1,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      metadata: { "id" => 1 }.to_json,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule_eligibility: 'return true;}'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.rules.should == [expected_hash]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  it 'returns the proper hash when a single bar_id is passed as an option' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    rule = Rule.create</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    bar = Bar.create bar_type: 'email', rule: rule</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    options = { bar_id: bar.id }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator = ScriptGenerator.new(site, options)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.stub bar_settings: {id: bar.id, template_name: bar.bar_type}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    site.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    expected_hash = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      bar_json: [{ id: bar.id, template_name: bar.bar_type }].to_json,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      priority: 1,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      metadata: { "id" => rule.id }.to_json,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule_eligibility: 'return true;}'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.rules.should == [expected_hash]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  it 'renders all bar json when the render_paused_bars is true' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    rule = Rule.create</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    bar = Bar.create bar_type: 'email', rule: rule, paused: true</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    options = { render_paused_bars: true }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator = ScriptGenerator.new(site, options)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.stub bar_settings: { id: bar.id, template_name: bar.bar_type, settings: { buffer_url: 'url' }}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    site.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    expected_hash = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      bar_json: [{ id: bar.id, template_name: bar.bar_type, settings: { buffer_url: 'url' }}].to_json,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      priority: 1,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      metadata: { "id" => rule.id }.to_json,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule_eligibility: 'return true;}'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.rules.should == [expected_hash]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  it 'renders only active bar json by default' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    rule = Rule.create</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    paused = Bar.create! bar_type: 'email', rule: rule, paused: true</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    active_bar = Bar.create! bar_type: 'traffic', rule: rule, paused: false</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator = ScriptGenerator.new(site)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.stub bar_settings: { id: active_bar.id, template_name: active_bar.bar_type }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    site.stub rules: [rule]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    expected_hash = {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      bar_json: [{ id: active_bar.id, template_name: active_bar.bar_type }].to_json,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      priority: 1,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      metadata: { "id" => rule.id }.to_json,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>      rule_eligibility: 'return true;}'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.rules.should == [expected_hash]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>describe ScriptGenerator, '#generate_script' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  it 'does not compress the template if the compress option is not set' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator = ScriptGenerator.new('site')</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.stub :render => 'template'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    Uglifier.should_not_receive(:new)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.should_receive(:render)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.generate_script</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  it 'compresses the template when the compress option is true' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator = ScriptGenerator.new('site', { compress: true })</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.stub :render => 'template'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    uglifier = Uglifier.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    Uglifier.should_receive(:new).and_return(uglifier)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    uglifier.should_receive(:compress).with('template')</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>    generator.generate_script</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/lib/script_generator_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_models_admin_spec_rb"> ./spec/models/admin_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>describe Admin do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  before(:each) do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin = admins(:joey)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  it "can create a new record from email and mobile phone" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    admin = Admin.make!("newadmin@polymathic.me", "5553211234")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    admin.should be_valid</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  it "standardizes mobile phone on validation" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    admin = Admin.new(:mobile_phone => "(555) 123-1234").tap{|a| a.valid?}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    admin.mobile_phone.should == "+15551231234"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  describe "::validate_session" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "returns an admin with valid access token and session token" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      Admin.validate_session(@admin.session_access_token, @admin.session_token).should == @admin</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "returns nil if admin not found" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      Admin.validate_session("gibber", "ish").should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "returns nil if the session is too old" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.should_receive(:session_last_active).and_return(Time.now - Admin::MAX_SESSION_TIME - 1.hour)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      Admin.should_receive(:where).and_return([@admin])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      result = Admin.validate_session("foo", "bar")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      result.should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "returns nil if the admin is locked" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.should_receive(:locked?).and_return(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      Admin.should_receive(:where).and_return([@admin])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      result = Admin.validate_session("foo", "bar")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      result.should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "returns nil if session is old AND admin is locked" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.stub(:locked?).and_return(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.stub(:session_last_active).and_return(Time.now - Admin::MAX_SESSION_TIME - 1.hour)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      Admin.should_receive(:where).and_return([@admin])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      result = Admin.validate_session("foo", "bar")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      result.should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "bumps session_last_active is session is still good" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.should_receive(:session_heartbeat!)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      Admin.should_receive(:where).and_return([@admin])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      Admin.validate_session("foo", "bar")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  describe "needs_mobile_code?" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "returns false if we've validated this access token recently" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.stub(:valid_access_tokens).and_return({"token" => [1.minute.ago.to_i, 1.minute.ago.to_i]})</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.needs_mobile_code?("token").should be_false</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "returns true if we've never validated this access token" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.stub(:valid_access_tokens).and_return({})</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.needs_mobile_code?("token").should be_true</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "returns true if we validated this access token too long ago" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.stub(:valid_access_tokens).and_return({"token" => [1.year.ago.to_i, 1.year.ago.to_i]})</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.needs_mobile_code?("token").should be_true</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  describe "send_new_mobile_code!" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "sends a mobile code" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      twilio = double(:twilio)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      Twilio::REST::Client.stub_chain("new.account.sms.messages").and_return(twilio)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      twilio.should_receive(:create).with(</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>        :body => anything,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>        :to => @admin.mobile_phone,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>        :from => "+14157952691"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      )</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.send_new_mobile_code!</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "sends no code if the admin is locked" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.stub(:locked?).and_return(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.send_new_mobile_code!.should be_false</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "locks the admin if too many codes have been sent" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.mobile_codes_sent = Admin::MAX_MOBILE_CODES + 1</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      Twilio::REST::Client.should_receive(:new).never</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.should_receive(:lock!)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.send_new_mobile_code!</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  it "send_validate_access_token_email! sends an email to the admin with correct URLs" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    Pony.should_receive(:mail)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.send_validate_access_token_email!("token")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  describe "validate_login" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    before(:each) do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.valid_access_tokens = {"token" => [Time.now.to_i, Time.now.to_i]}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "locks the admin if attempting to log in too many times" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.update_attribute(:login_attempts, Admin::MAX_LOGIN_ATTEMPTS)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.should_not be_locked</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.validate_login("token", "password", @admin.mobile_code)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.should be_locked</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.login_attempts.should == Admin::MAX_LOGIN_ATTEMPTS + 1</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "returns false if locked" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.stub(:locked?).and_return(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.validate_login("token", "password", @admin.mobile_code).should be_false</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "returns false if mobile code does not match" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.stub(:needs_mobile_code?).and_return(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.validate_login("token", "password", "notthecode").should be_false</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "returns false if the wrong password is used" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.validate_login("token", "notthepassword", @admin.mobile_code).should be_false</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "returns false if the access token is invalid" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.validate_login("notthetoken", "password", @admin.mobile_code).should be_false</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    it "logs the admin in if all params are valid" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.stub(:needs_mobile_code?).and_return(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.should_receive(:login!)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      @admin.validate_login("token", "password", @admin.mobile_code).should be_true</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  it "reset_password! resets password and notifies admin via email" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.password_last_reset.should be < 1.minute.ago</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    Pony.should_receive(:mail)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.should_receive(:set_password!).with("new_password")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.reset_password!("new_password")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.password_last_reset.should be > 1.minute.ago</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  it "login! logs the admin in" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.update_attributes(</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      :mobile_codes_sent => 2,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      :login_attempts => 2,</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      :session_token => "",</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>      :session_access_token => ""</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    )</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.should_receive(:set_valid_access_token)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.should_receive(:session_heartbeat!)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.login!("new_token")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.reload</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.mobile_codes_sent.should == 0</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.login_attempts.should == 0</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.session_token.should_not be_blank</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>    @admin.session_access_token.should_not be_blank</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/admin_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_models_bar_spec_rb"> ./spec/models/bar_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/bar_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/bar_spec.rb'><pre>describe Bar do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/bar_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/bar_spec.rb'><pre>  it "belongs to a site through a rule set" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/bar_spec.rb'><pre>    bar = bars(:zombo_traffic)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/bar_spec.rb'><pre>    bar.site.should == sites(:zombo)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/bar_spec.rb'><pre>    bar.rule = nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/bar_spec.rb'><pre>    bar.site.should be_nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/bar_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/bar_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_models_condition_date_condition_spec_rb"> ./spec/models/condition/date_condition_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>describe DateCondition, '.create_from_params' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>  it 'creates a between condition when both start_date and end_date are present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    condition = DateCondition.create_from_params('start', 'end')</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    condition.operand.should == Condition::OPERANDS[:is_between]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    condition.value['start_date'].should == 'start'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    condition.value['end_date'].should == 'end'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>  it 'creates a start_date condition when only start_date is present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    condition = DateCondition.create_from_params('start', '')</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    condition.operand.should == Condition::OPERANDS[:is_after]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    condition.value['start_date'].should == 'start'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    condition.value['end_date'].should be_nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>  it 'creates a end_date condition when only end_date is present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    condition = DateCondition.create_from_params('', 'end')</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    condition.operand.should == Condition::OPERANDS[:is_before]</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    condition.value['end_date'].should == 'end'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    condition.value['start_date'].should be_nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>  it 'does nothing when neither start nor end date are present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    expect {</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>      DateCondition.create_from_params('', '')</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>    }.to_not change(Condition, :count)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/date_condition_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_models_condition_url_condition_spec_rb"> ./spec/models/condition/url_condition_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>describe UrlCondition, '.create_include_url' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>  it 'creates the correct url condition with the correct operand' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>    url = 'http://googley.com'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>    UrlCondition.should_receive(:create).</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>      with({ operand: Condition::OPERANDS[:includes], value: { 'include_url' => url } })</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>    UrlCondition.create_include_url(url)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>describe UrlCondition, '.create_exclude_url' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>  it 'creates the correct url condition with the correct operand' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>    url = 'http://moogley.com'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>    UrlCondition.should_receive(:create).</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>      with({ operand: Condition::OPERANDS[:excludes], value: { 'exclude_url' => url } })</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>    UrlCondition.create_exclude_url(url)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>describe UrlCondition, '#url' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>  it 'returns the include_url if present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>    condition = UrlCondition.new value: { 'include_url' => 'include' }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>    condition.url.should == 'include'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>  it 'returns the exclude_url if present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>    condition = UrlCondition.new value: { 'exclude_url' => 'exclude' }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>    condition.url.should == 'exclude'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>  it 'returns nil when neither include_url nor exclude_url are present' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>    UrlCondition.new.url.should be_nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/condition/url_condition_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_models_internal_report_spec_rb"> ./spec/models/internal_report_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>describe InternalReport do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>  before do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>    InternalReport.clear</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>  it "should return nil for a report not yet set" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>    InternalReport.get_data("test").should == nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>  it "should let you return a report that is set" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>    data = {"foo"=>"bar"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>    InternalReport.set("test", data)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>    InternalReport.get_data("test").should == data</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>  it "should let you update an existing report" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>    data = {"foo"=>"bar"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>    InternalReport.set("test", data)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>    InternalReport.get_data("test").should == data</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>    data = {"foo"=>"bar2"}</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>    InternalReport.set("test", data)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>    InternalReport.get_data("test").should == data</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>  it "should not error out when you generate the reports" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>    InternalReport.generate_all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/internal_report_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_models_site_membership_spec_rb"> ./spec/models/site_membership_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_membership_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_membership_spec.rb'><pre>describe SiteMembership do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_membership_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_membership_spec.rb'><pre>  it "can only have one owner per site" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_membership_spec.rb'><pre>    membership = SiteMembership.new(:site => sites(:zombo), :user => users(:wootie), :role => "editor")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_membership_spec.rb'><pre>    membership.should be_valid</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_membership_spec.rb'><pre>    membership.role = "owner"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_membership_spec.rb'><pre>    membership.should_not be_valid</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_membership_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_membership_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_models_site_spec_rb"> ./spec/models/site_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>describe Site do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  fixtures :all</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  before(:each) do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    @site = sites(:zombo)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  it_behaves_like "an object with a valid url"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  it "is able to access its owner" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    @site.owner.should == users(:joey)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  describe "url formatting" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    it "adds the protocol if not present" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      site = Site.new(:url => "zombo.com")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      site.valid?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      site.url.should == "http://zombo.com"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    it "uses the supplied protocol if present" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      site = Site.new(:url => "https://zombo.com")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      site.valid?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      site.url.should == "https://zombo.com"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      site = Site.new(:url => "http://zombo.com")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      site.valid?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      site.url.should == "http://zombo.com"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    it "removes the path, if provided" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      urls = %w(</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        zombo.com/welcometozombocom</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        zombo.com/anythingispossible?at=zombocom</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        zombo.com?theonlylimit=yourimagination&at=zombocom#welcome</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      )</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      urls.each do |url|</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        site = Site.new(:url => url)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        site.valid?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        site.url.should == "http://zombo.com"</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    it "accepts valid inputs" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      urls = %w(</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        zombo.com</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        http://zombo.com/</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        http://zombo.com/welcome</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        http://zombo2.com/welcome</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        horse.bike</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      )</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      urls.each do |url|</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        site = Site.new(:url => url)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        site.valid?</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>        site.errors[:url].should be_empty</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  describe "#script_content" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    it "generates the contents of the script for a site" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      script = @site.script_content(false)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      script.should =~ /HB_SITE_ID/</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      script.should include(@site.bars.first.id.to_s)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    it "generates the compressed contents of the script for a site" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      script = @site.script_content</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      script.should =~ /HB_SITE_ID/</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      script.should include(@site.bars.first.id.to_s)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  describe "#generate_static_assets" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    it "generates and uploads the script content for a site" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      script_content = @site.script_content(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      script_name = @site.script_name</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      mock_storage = double("asset_storage")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      mock_storage.should_receive(:create_or_update_file_with_contents).with(script_name, script_content)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      Hello::AssetStorage.stub(:new => mock_storage)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      @site.generate_script</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  it "blanks-out the site script when destroyed" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    mock_storage = double("asset_storage")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    mock_storage.should_receive(:create_or_update_file_with_contents).with(@site.script_name, "")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    Hello::AssetStorage.stub(:new => mock_storage)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    @site.destroy</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  describe "#has_script_installed?" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    it "is true if script_installed_at is set" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      @site.script_installed_at = 1.day.ago</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      @site.has_script_installed?.should be_true</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    it "is false if no bars have views" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      @site.stub(:bars => [double("bar", :total_views => 0)])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      @site.has_script_installed?.should be_false</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      @site.script_installed_at.should be_nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    it "is true and sets script_installed_at if at least one bar has been viewed" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      @site.stub(:bars => [double("bar", :total_views => 1)])</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      @site.has_script_installed?.should be_true</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>      @site.script_installed_at.should_not be_nil</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/site_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_models_user_spec_rb"> ./spec/models/user_spec.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/user_spec.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/user_spec.rb'><pre>describe User do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/user_spec.rb'><pre>  it "cannot have the same email as someone in the wordpress database" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/user_spec.rb'><pre>    Hello::WordpressUser.should_receive(:email_exists?).with("foo@bar.com").and_return(true)</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/user_spec.rb'><pre>    user = User.create(:email => "foo@bar.com")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/user_spec.rb'><pre>    user.errors.messages[:email].should include("has already been taken")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/user_spec.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/user_spec.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>

  <h2 id="_spec_models_validators_url_validator_shared_rb"> ./spec/models/validators/url_validator_shared.rb</h2>
  <div class="rcov_overflow">
    <table class="rcov_code">
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>require 'spec_helper'</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>shared_examples "an object with a valid url" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>  class WebClass</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    include ActiveModel::Validations</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    attr_accessor :url</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    validates_with UrlValidator, url_field: :url</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>  let(:webby) { WebClass.new }</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>  it 'requires the url field' do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    webby.url = ""</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    webby.should_not be_valid</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    webby.errors[:url].should include("can't be blank")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>  it "requires a url with a valid format" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    urls = %w(</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      lololol</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      1234</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      me@notaurl.com</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      ftp://warez.dfnet.org</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    )</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    urls.each do |url|</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      test_case = WebClass.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      test_case.url = url</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      test_case.should_not be_valid</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      test_case.errors[:url].should include("is invalid")</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>  it "accepts valid inputs" do</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    urls = %w(</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      http://zombo.com</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      http://horse.bike</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      http://madam-e.ru</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      http://ec2-174-129-140-89.compute-1.amazonaws.com</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    )</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    urls.each do |url|</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      test_case = WebClass.new</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      test_case.url = url</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>      test_case.should be_valid</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>    end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>  end</pre></a></td>
      </tr>
    
      <tr>
        
        <td class="rcov_not_run"><a href='file:///Users/quigebo/hellobar_new/spec/models/validators/url_validator_shared.rb'><pre>end</pre></a></td>
      </tr>
    
    </table>
  </div>


<p>Generated on 2014-06-20 15:06:12 -0500</p>

    </div>

    
    <script language="javascript" src="bluff_graph.js" type="text/javascript"></script>
  </body>
</html>
