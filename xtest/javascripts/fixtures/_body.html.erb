<%-
  # stubbing the controller action!!
  @site = Site.first
  @site_element = SiteElement.first
  @rules = @site.rules.all
  @rules << Rule.new(name: 'Everyone') if @rules.empty?

  def get_ab_variation(test); "original"; end
%>

<script type="text/javascript">
  <%= ScriptGenerator.new(@site, :templates => SiteElement.all_templates, :rules => []).generate_script.gsub("<script>", "\\<script\\>").gsub("</script>", "\\</script\\>").html_safe %>
</script>

<%= render template: "layouts/ember" %>
<%= render file: "site_elements/edit" %>

<script>
jQuery = Ember.$;
</script>
<%= javascript_include_tag 'support/jquery.mockjax' %>
<%= javascript_include_tag 'support/ajax_mocks' %>
<%= javascript_include_tag 'support/ember/view_helpers' %>
<%= javascript_include_tag 'support/ember/module_helpers' %>
